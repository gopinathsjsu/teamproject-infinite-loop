"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3490],{93490:function(e,t,n){n.r(t),n.d(t,{default:function(){return Layout}});var i=n(57437),o=n(2265),r=n(35843),s=n(64111),a=n(39227),l=n(76500),d=n(63955),c=n(43226),u=n(3857),h=n(25210);function Copyright(){return(0,i.jsxs)(c.Z,{variant:"body2",color:"text.secondary",align:"center",children:["Copyright \xa9 ",(0,i.jsx)(h.Z,{color:"inherit",href:"https://mui.com/",children:"Box Office"})," ",new Date().getFullYear(),"."]})}function Footer(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.ZP,{}),(0,i.jsx)(a.Z,{component:"footer",sx:{py:3,px:2,mt:"auto",backgroundColor:e=>"light"===e.palette.mode?e.palette.grey[200]:e.palette.grey[800]},children:(0,i.jsx)(d.Z,{maxWidth:"sm",children:(0,i.jsx)(Copyright,{})})})]})}var p=n(24033),m=n(89975),x=n(34989),g=n(52653),f=n(33932),y=n(52513),b=n(3283),j=n(49050),w=n(78276),Z=n(65507),C=n(5906),v=n(58991),S=n(8222),k=n(59292),P=n(81679),I=n(26931),M=n(39350),L=n(72261),A=n(35266),_=n(23341),D=n(80356),T=n(38212),E=n(71932),F=n(55594),O=n(93037),W=n(83304);function LocationSearchInput(e){let{sendLocation:t}=e,[n,r]=(0,o.useState)(""),handleSelect=async e=>{let n=await (0,O.NU)(e),i=n[0].address_components;r(e),t(i)};return(0,i.jsx)(O.ZP,{value:n,onChange:r,onSelect:handleSelect,children:e=>{let{getInputProps:t,suggestions:n,getSuggestionItemProps:r,loading:s}=e;return(0,i.jsxs)(W.Z,{sx:{position:"absolute",top:"10%",width:"90%"},children:[(0,i.jsx)(F.Z,{...t({label:"Search Pincode..."}),variant:"outlined",fullWidth:!0}),s&&(0,i.jsx)("div",{children:"Loading..."}),(0,i.jsx)(A.Z,{sx:{position:"absolute",zIndex:1,width:"100%"},children:n.map(e=>(0,o.createElement)(D.ZP,{...r(e),sx:{backgroundColor:e.active?"#b9d2fa":"#ffffff",cursor:"pointer"},key:e.placeId},e.description))})]})}})}var R=n(48475),U=n.n(R),z=n(16896),B=n(28874),N=n(61865),q=n(38110),G=n(74578),H=n(36661);let J=G.Ry({tuesday:G.Z_().min(0,{message:"Must be between 0 and 100"}).max(100,{message:"Must be between 0 and 100"}),night_time:G.Z_().min(0,{message:"Must be between 0 and 100"}).max(100,{message:"Must be between 0 and 100"})});function Discount(e){let{submitSuccess:t}=e,{control:n,handleSubmit:r,formState:{errors:s},setValue:a}=(0,N.cI)({resolver:(0,q.F)(J)});(0,o.useEffect)(()=>{!async function(){try{let e=await (0,H.e)("","discount/all","GET");a("tuesday",e.data.tuesday.toString()),a("night_time",e.data.night_time.toString())}catch(e){console.error("Failed to fetch",e)}}()},[]);let getErrorMessage=e=>e&&"string"==typeof e.message?e.message:"",onSubmit=async e=>{await (0,H.e)(e,"discount/add","POST"),t(!0)};return(0,i.jsx)("form",{onSubmit:r(onSubmit),children:(0,i.jsxs)(B.ZP,{container:!0,spacing:2,children:[(0,i.jsx)(B.ZP,{item:!0,xs:12,children:(0,i.jsx)(N.Qr,{name:"tuesday",control:n,defaultValue:0,render:e=>{let{field:t}=e;return(0,i.jsx)(F.Z,{...t,type:"number",label:"Tuesday Discounts (%)",error:!!s.tuesday,helperText:getErrorMessage(s.tuesday),InputProps:{inputProps:{min:0,max:100}},fullWidth:!0})}})}),(0,i.jsx)(B.ZP,{item:!0,xs:12,children:(0,i.jsx)(N.Qr,{name:"night_time",control:n,defaultValue:0,render:e=>{let{field:t}=e;return(0,i.jsx)(F.Z,{...t,type:"number",label:"Daily Discounts (%)",error:!!s.night_time,helperText:getErrorMessage(s.night_time),InputProps:{inputProps:{min:0,max:100}},fullWidth:!0})}})}),(0,i.jsx)(B.ZP,{item:!0,xs:12,children:(0,i.jsx)(j.Z,{type:"submit",variant:"contained",color:"primary",children:"Submit"})})]})})}let K=(0,r.ZP)("div")(e=>{let{theme:t}=e;return{padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",marginTop:"10px",left:"-70px"}}),Q=[{name:"Movies",route:"/movie/all",onlyAdmin:!1},{name:"Theaters",route:"/theater",onlyAdmin:!1},{name:"Arists",route:"/artist/all",onlyAdmin:!1},{name:"Analysis",route:"/analysis",onlyAdmin:!0},{name:"Manage Discounts",route:"openModal",onlyAdmin:!0}],V=[{name:"Profile",route:"/personal_profile"},{name:"Purchases",route:"/purchases"},{name:"Rewards",route:"/rewards"},{name:"Manage Membership",route:"https://billing.stripe.com/p/login/test_cN23e27JRdQPeMEbII"},{name:"Logout",route:"/logout",icon:"LogoutIcon"}],X=[{name:"Profile",route:"/personal_profile"},{name:"Logout",route:"/logout"}],Y={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};var navigationBar=function(){let e=(0,p.useRouter)(),[t,n]=o.useState(""),u=(0,k.D)(),[h,O]=o.useState(""),[W,R]=o.useState({id:"",name:"",profile_url:""}),[B,N]=o.useState(!1),[q,G]=o.useState(null),[J,$]=o.useState(null),ee=(0,z.Z)(),[et,en]=(0,o.useState)([]),[ei,eo]=(0,o.useState)(!1),[er,es]=(0,o.useState)([]),[ea,el]=(0,o.useState)(!1);o.useEffect(()=>{fetchMovieData();let e=ee.user;null!=e&&e.isAdmin?es(X):es(V),null!=e&&n(e.profile_url)},[]);let fetchMovieData=async()=>{try{let e=await (0,H.e)("","movie/all","GET"),t=e.movies.map(e=>({id:e.id,name:e.title,profile_url:e.poster_url}));en(t)}catch(e){console.error("Failed to fetch movie data:",e)}},handleCloseNavMenu=()=>{G(null)},handleCloseUserMenu=()=>{$(null)},handleDrawerClose=()=>{N(!1)},handleCardClick=t=>{e.push("/movie/".concat(t))},ed=(0,r.ZP)("div")(e=>{let{theme:t}=e;return{position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:(0,m.Fq)(t.palette.common.white,.15),"&:hover":{backgroundColor:(0,m.Fq)(t.palette.common.white,.25)},marginRight:t.spacing(2),marginLeft:0,width:"100%",[t.breakpoints.up("sm")]:{marginLeft:t.spacing(3),width:"auto"}}});function redirectToPage(t){if("Logout"==t.name){ee.setIsAdmin(!1),ee.setLoggedOut(),e.push("/");return}if("openModal"==t.route){el(!0);return}e.push(t.route)}let handleClose=()=>{eo(!1),el(!1)};return(0,i.jsxs)(a.Z,{children:[(0,i.jsxs)(l.Z,{position:"static",children:[(0,i.jsx)(U(),{src:"https://maps.googleapis.com/maps/api/js?key=AIzaSyAH_4KikoUaqV41Fq09gBEsXzADYU1xM8w&libraries=places",strategy:"afterInteractive"}),(0,i.jsx)(d.Z,{maxWidth:"xl",children:(0,i.jsxs)(x.Z,{disableGutters:!0,children:[(0,i.jsx)(c.Z,{variant:"h6",noWrap:!0,component:"a",href:"/",sx:{mr:2,display:{xs:"none",md:"flex"},fontWeight:700,color:"inherit",textDecoration:"none"},children:"Box Office"}),(0,i.jsxs)(a.Z,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[(0,i.jsx)(g.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{G(e.currentTarget)},color:"inherit",children:(0,i.jsx)(y.Z,{})}),(0,i.jsx)(f.Z,{id:"menu-appbar",anchorEl:q,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!q,onClose:handleCloseNavMenu,sx:{display:{xs:"block",md:"none"}},children:Q.map(e=>"openModal"!==e.route||"openModal"===e.route&&ee.isAdmin?(0,i.jsx)(Z.Z,{onClick:handleCloseNavMenu,children:(0,i.jsxs)(c.Z,{onClick:()=>{redirectToPage(e)},textAlign:"center",children:[" ",e.name]})},e.name):null)})]}),(0,i.jsx)(C.Z,{sx:{display:{xs:"flex",md:"none"},mr:1}}),(0,i.jsx)(c.Z,{variant:"h5",noWrap:!0,component:"a",href:"/",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontWeight:700,color:"inherit",textDecoration:"none"},children:"Box Office"}),(0,i.jsx)(a.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:Q.map(e=>!e.onlyAdmin||e.onlyAdmin&&ee.isAdmin?(0,i.jsx)(j.Z,{onClick:()=>{redirectToPage(e)},sx:{my:2,color:"white",display:"block"},children:e.name},e.name):null)}),(0,i.jsx)(E.Z,{value:W,onChange:(e,t)=>R(t),filterOptions:(e,t)=>{let n=u(e,t),{inputValue:i}=t,o=e.some(e=>i===e.name);return""===i||o||n.push({id:i.toLowerCase().replace(/\s/g,"-"),name:i,profile_url:""}),n},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"movie-search",options:et,getOptionLabel:e=>"string"==typeof e?e:e.name,renderOption:(e,t)=>(0,i.jsxs)(a.Z,{component:"li",...e,onClick:()=>handleCardClick(t.id),style:{cursor:"pointer"},children:[(0,i.jsx)(b.Z,{src:t.profile_url,alt:t.name,sx:{width:30,height:30,marginRight:"10px"}}),t.name]}),sx:{position:"relative",borderRadius:4,backgroundColor:"transparent",width:300,marginLeft:0,padding:"8px 30px",color:"white",borderColor:"#FFFFFF","& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"},"& .MuiInputBase-input":{color:"white"},"& .MuiAutocomplete-clearIndicator":{color:"white"}}},freeSolo:!0,renderInput:e=>(0,i.jsx)(a.Z,{children:(0,i.jsx)(F.Z,{...e,label:"Search movies",InputProps:{...e.InputProps,startAdornment:(0,i.jsx)(P.Z,{position:"start",children:(0,i.jsx)(v.Z,{sx:{color:"white"}})}),style:{color:"white"},sx:{backgroundColor:"transparent","&::placeholder":{color:"white"}}},InputLabelProps:{style:{color:"white"}},sx:{"& .MuiInputLabel-outlined":{color:"white"},"& .MuiInputLabel-outlined.Mui-focused":{color:"white"},"& .MuiInputBase-input":{color:"white"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"}}}})})}),(0,i.jsxs)(j.Z,{onClick:()=>{eo(!0)},sx:{my:2,color:"white",display:"block"},children:[(0,i.jsx)(ed,{children:(0,i.jsx)(K,{children:(0,i.jsx)(S.Z,{})})}),""!=h?h:"Select Pincode"]},"location"),ee.isLoggedIn?(0,i.jsxs)(a.Z,{sx:{flexGrow:0},children:[(0,i.jsx)(w.Z,{title:"Open settings",children:(0,i.jsx)(g.Z,{onClick:()=>{N(!0)},sx:{p:0},children:(0,i.jsx)(b.Z,{alt:"Remy Sharp",src:t})})}),(0,i.jsx)(f.Z,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:J,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!J,onClose:handleCloseUserMenu,children:er.map(e=>(0,i.jsx)(Z.Z,{onClick:handleCloseUserMenu,children:(0,i.jsx)(c.Z,{onClick:()=>{redirectToPage(e)},textAlign:"center",children:e.name})},e.name))})]}):(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(j.Z,{onClick:function(){e.push("/signup")},sx:{my:2,fontWeight:700,color:"inherit",textDecoration:"none"},children:"Sign Up"},"signup"),(0,i.jsx)(j.Z,{onClick:function(){e.push("/signin")},sx:{my:2,fontWeight:700,color:"inherit",textDecoration:"none"},children:"Sign In"},"signin")]})]})}),(0,i.jsx)(I.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:ei,onClose:handleClose,closeAfterTransition:!0,slots:{backdrop:M.Z},slotProps:{backdrop:{timeout:500}},children:(0,i.jsx)(L.Z,{in:ei,children:(0,i.jsx)(a.Z,{sx:{...Y,display:"flex",justifyContent:"center",alignItems:"center",width:"600px",maxWidth:"1000px",height:"400px"},children:(0,i.jsx)(LocationSearchInput,{sendLocation:function(t){let getAddressComponent=e=>{var n;return(null===(n=t.find(t=>t.types.includes(e)))||void 0===n?void 0:n.long_name)||""},n=getAddressComponent("locality"),i=getAddressComponent("administrative_area_level_2"),o="".concat(i,", ").concat(n);eo(!1),O(o),ee.setPinCode(getAddressComponent("postal_code")),e.push("/")}})})})}),(0,i.jsx)(I.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:ea,onClose:handleClose,closeAfterTransition:!0,slots:{backdrop:M.Z},slotProps:{backdrop:{timeout:500}},children:(0,i.jsx)(L.Z,{in:ea,children:(0,i.jsx)(a.Z,{sx:{...Y,display:"flex",justifyContent:"center",alignItems:"center",width:"600px",maxWidth:"1000px",height:"400px"},children:(0,i.jsx)(Discount,{submitSuccess:function(){el(!1)}})})})})]}),(0,i.jsx)(s.ZP,{anchor:"right",open:B,onClose:handleDrawerClose,children:(0,i.jsx)(a.Z,{sx:{width:250},role:"presentation",onClick:handleDrawerClose,onKeyDown:handleDrawerClose,children:(0,i.jsx)(A.Z,{subheader:(0,i.jsx)(_.Z,{component:"div",id:"nested-list-subheader",sx:{backgroundColor:e=>e.palette.primary.main,color:e=>e.palette.primary.contrastText,fontWeight:"bold",fontSize:"2rem",lineHeight:"normal",height:"70px",display:"flex",alignItems:"center"},children:"Hello"}),children:er.map((e,t)=>(0,i.jsx)(D.ZP,{button:!0,onClick:()=>redirectToPage(e),children:(0,i.jsx)(T.Z,{primary:e.name})},e.name))})})})]})},page=()=>(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"linear-gradient(to right, #f8f8f8, #e7e7e7)"},children:(0,i.jsx)("img",{src:"https://media.giphy.com/media/Ck8tWBj2lCTnUKdwxW/giphy.gif",alt:"Loading...",style:{width:"200px",height:"200px"}})});function Layout(e){let{children:t}=e,[n,r]=o.useState(!1),[s,l]=o.useState(!1),[c,u]=(0,o.useState)(!0);return((0,o.useEffect)(()=>{let e=setTimeout(()=>{u(!1)},500);return()=>clearTimeout(e)},[]),c)?(0,i.jsx)(page,{}):(0,i.jsxs)(a.Z,{children:[(0,i.jsx)(navigationBar,{}),(0,i.jsxs)(a.Z,{component:"main",sx:{backgroundColor:e=>"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900],display:"flex",flexDirection:"column",minHeight:"100vh"},children:[(0,i.jsx)(d.Z,{maxWidth:!1,component:"main",sx:{flex:1},children:t}),(0,i.jsx)(Footer,{})]})]})}(0,r.ZP)(l.Z,{shouldForwardProp:e=>"open"!==e})(e=>{let{theme:t,open:n}=e;return{zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),...n&&{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})}}}),(0,r.ZP)(s.ZP,{shouldForwardProp:e=>"open"!==e})(e=>{let{theme:t,open:n}=e;return{"& .MuiDrawer-paper":{position:"relative",whiteSpace:"nowrap",width:240,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen}),boxSizing:"border-box",...!n&&{overflowX:"hidden",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),width:t.spacing(7),[t.breakpoints.up("sm")]:{width:t.spacing(9)}}}}})},36661:function(e,t,n){async function handleResponse(e){let t=e.headers.get("Content-Type")||"",n=t.includes("application/json"),i=n?await e.json():await e.text();if(!e.ok){if(n&&null!==i.errors)throw Error(JSON.stringify(i.errors));throw Error(i.message||e.statusText)}return i}async function getDataFromEndPoint(e,t,n){let i="http://ec2-3-101-12-15.us-west-1.compute.amazonaws.com/api/"+t,o=e instanceof FormData;if("GET"==n){let e=await fetch(i,{method:n,credentials:"include"});return handleResponse(e).then(e=>e)}let r={method:n,credentials:"include",body:e};o||(r.headers={"Content-Type":"application/json"},r.body=JSON.stringify(e));let s=await fetch(i,r);return handleResponse(s).then(e=>e)}n.d(t,{e:function(){return getDataFromEndPoint}})},16896:function(e,t,n){var i=n(94660),o=n(74810);let r=(0,i.Ue)((0,o.tJ)(e=>({authUser:null,isLoggedIn:!1,requestLoading:!1,user:null,pincode:null,isAdmin:!1,setIsAdmin:t=>e(e=>({...e,isAdmin:t})),setUser:t=>e(e=>({...e,user:t})),setLoggedIn:()=>e(e=>({...e,isLoggedIn:!0})),setLoggedOut:()=>e(e=>({...e,isLoggedIn:!1})),setAuthUser:t=>e(e=>({...e,authUser:t})),setPinCode:t=>e(e=>({...e,pincode:t})),setRequestLoading:t=>e(e=>({...e,requestLoading:t})),reset:()=>e({authUser:null,requestLoading:!1})}),{name:"user-storage"}));t.Z=r}}]);