(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3948],{14756:function(e,t,r){Promise.resolve().then(r.bind(r,99552))},99552:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Theater}});var n=r(57437),a=r(36661),s=r(2265),i=r(24033),o=r(63955),l=r(3857),d=r(28874),c=r(43226),m=r(49050),u=r(39227),h=r(25210),p=r(98075),x=r(55594),f=r(13391),g=r(26931),j=r(39350),b=r(634),Z=r(72261),y=r(83686),_=r(35843),S=r(26398),w=r(36718),T=r(61865),C=r(38110),E=r(74578);let v=E.Ry({theater_name:E.Z_().min(1,"Screen Name is required"),description:E.Z_().min(1,"description is required").max(350,"Must be under 350 chareceters"),city:E.Z_().min(1,"city is required"),location_url:E.Z_().min(1,"locationUrl is required").url("Invalid Url"),address:E.Z_().min(1,"address is required"),zipcode:E.Z_().refine(e=>/^\d{5}$/.test(e),{message:"Invalid ZipCode number. Must be 5 digits."}),email:E.Z_().min(1,"Email is required").email("Email is invalid"),phno:E.Z_().refine(e=>/^\d{10}$/.test(e),{message:"Invalid phone number. Must be 10 digits."}),state:E.Z_().min(1,"state is required")});function Theater(){let e=(0,i.useRouter)(),[t,r]=(0,s.useState)([]),[E,F]=(0,s.useState)({theater_name:"",description:"",city:"",location_url:"",zipcode:"",phno:"",email:"",address:"",state:""}),[P,z]=(0,s.useState)(!1),[I,N]=(0,s.useState)(null),D=(0,_.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1,accept:"image/*"});(0,s.useEffect)(()=>{let fetchData=async()=>{let e=await (0,a.e)("","theater/all","GET"),n=e.data,s=n.map(e=>({name:e.name,description:e.description,locationUrl:e.theater_url,address:e.address,screenDetails:e.screen_ids,imageUrl:e.image_url,nScreens:e.screen_ids.length,email:e.mail,phoneNumber:e.mobile,id:e.id}));console.log(s),r(s),console.log(t)};fetchData()},[]);let onSubmit=async e=>{if(I){let n=new FormData;n.append("file",I),n.append("data",JSON.stringify(e)),console.log(n);let s=await (0,a.e)(n,"theater/add","POST");if(200===s.status){console.log(s);let e=[s.data];console.log(e);let n=e.map(e=>({name:e.name,description:e.description,locationUrl:e.theater_url,address:e.address,screenDetails:e.screen_ids,imageUrl:e.image_url,nScreens:e.screen_ids.length,email:e.mail,phoneNumber:e.mobile,id:e.id}));r([...t,...n])}z(!0)}V(!0)},{handleSubmit:M,control:R,formState:{errors:W}}=(0,T.cI)({resolver:(0,C.F)(v)}),getErrorMessage=e=>e&&"string"==typeof e.message?e.message:"",addScreen=t=>{e.push("/theater/"+t+"/screens/")},[k,U]=s.useState(!1),[Q,V]=s.useState(!1);return(0,n.jsxs)(s.Fragment,{children:[(0,n.jsx)(l.ZP,{}),(0,n.jsxs)(o.Z,{maxWidth:"xl",style:{marginLeft:"0px",marginRight:"0px",marginTop:"3%"},children:[(0,n.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,n.jsxs)(d.ZP,{container:!0,sx:{mb:2,marginTop:10,justifyContent:"space-between"},children:[(0,n.jsx)(c.Z,{variant:"h4",children:"Theaters"}),(0,n.jsx)(m.Z,{variant:"contained",startIcon:(0,n.jsx)(b.Z,{}),onClick:()=>U(!0),children:"Add Theater"})]}),(0,n.jsx)(d.ZP,{item:!0,xs:12,container:!0,children:(0,n.jsx)(d.ZP,{container:!0,spacing:2,alignItems:"center",justifyContent:"left",children:t.map((e,t)=>(0,n.jsx)(d.ZP,{item:!0,xs:12,md:6,lg:6,children:(0,n.jsxs)(u.Z,{sx:{bgcolor:"white",p:3,borderRadius:2,boxShadow:3,display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:"center"},children:[(0,n.jsx)("img",{src:e.imageUrl,alt:"Theater",style:{marginBottom:16,marginRight:24,width:192,borderRadius:8}}),(0,n.jsxs)(u.Z,{sx:{flex:1},children:[(0,n.jsxs)(d.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[(0,n.jsx)(h.Z,{href:e.locationUrl,target:"_blank",rel:"noopener noreferrer",underline:"hover",style:{textDecoration:"none"},children:(0,n.jsx)(c.Z,{variant:"h6",component:"h3",sx:{mb:1,fontWeight:"medium",fontSize:"2rem"},style:{},color:"#01579B",children:e.name})}),(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(m.Z,{startIcon:(0,n.jsx)(f.Z,{}),sx:{px:1,py:.5,borderRadius:1,mr:1,mb:1,fontSize:"1rem"}}),(0,n.jsx)(m.Z,{sx:{px:1,py:.5,borderRadius:1,mr:1,mb:1,fontSize:"1rem"},onClick:()=>addScreen(e.id),children:"Show Screens"})]})]}),(0,n.jsx)(c.Z,{variant:"body2",color:"text.secondary",sx:{fontSize:"1rem"},children:e.description}),(0,n.jsx)(c.Z,{variant:"body2",color:"text.secondary",sx:{mb:1,fontSize:"1rem"},children:e.address}),(0,n.jsxs)(u.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",mb:2},children:[(0,n.jsx)(u.Z,{sx:{bgcolor:"blue.100",color:"blue.800",px:1,py:.5,borderRadius:1,mr:1,mb:1,fontSize:"1rem"},children:"Screens: ".concat(e.nScreens)}),e.screenDetails.map((e,t)=>(0,n.jsx)(m.Z,{sx:{px:1,py:.5,borderRadius:1,mr:1,mb:1,fontSize:"1rem"},children:e},t))]}),(0,n.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center",fontSize:"0.875rem",color:"text.secondary"},children:[(0,n.jsxs)(u.Z,{sx:{mr:2},children:[(0,n.jsx)("i",{className:"fas fa-envelope mr-1"}),e.email]}),(0,n.jsxs)(u.Z,{children:[(0,n.jsx)("i",{className:"fas fa-phone mr-1"}),e.phoneNumber]})]})]})]})},t))})})]}),(0,n.jsx)(g.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:k,onClose:()=>U(!1),closeAfterTransition:!0,slots:{backdrop:j.Z},slotProps:{backdrop:{timeout:500}},children:(0,n.jsx)(Z.Z,{in:k,children:(0,n.jsx)(u.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,display:"flex",justifyContent:"center",alignItems:"center",width:"600px",maxWidth:"1000px"},children:(0,n.jsxs)(p.Z,{direction:"column",spacing:2,children:[P?"successs":"",(0,n.jsxs)("form",{encType:"multipart/form-data",action:"/Theater/addtheater",onSubmit:M(onSubmit),children:[(0,n.jsx)(u.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,n.jsxs)(m.Z,{sx:{width:200},component:"label",variant:"contained",startIcon:(0,n.jsx)(y.Z,{}),children:[I?(0,n.jsxs)(n.Fragment,{children:["File Uploaded"," ",(0,n.jsx)(w.Z,{sx:{ml:1}})]}):"Upload Image",(0,n.jsx)(D,{type:"file",onChange:e=>{e.preventDefault();let t=e.target.files[0];N(t)}}),Q&&!I?(0,n.jsx)(c.Z,{children:"File required"}):""]})}),(0,n.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,n.jsxs)(d.ZP,{item:!0,xs:12,md:12,lg:6,children:[(0,n.jsx)(T.Qr,{name:"theater_name",control:R,defaultValue:"",render:e=>{let{field:t}=e;return(0,n.jsx)(x.Z,{...t,margin:"normal",fullWidth:!0,id:"theater_name",label:"Theater Name",autoComplete:"theater",autoFocus:!0,error:!!W.theater_name,helperText:getErrorMessage(W.theater_name)})}}),(0,n.jsx)(T.Qr,{name:"description",control:R,defaultValue:"",render:e=>{let{field:t}=e;return(0,n.jsx)(x.Z,{...t,margin:"normal",fullWidth:!0,id:"description",label:"Description",autoComplete:"description",autoFocus:!0,error:!!W.description,helperText:getErrorMessage(W.description)})}}),(0,n.jsx)(T.Qr,{name:"phno",control:R,defaultValue:"",render:e=>{let{field:t}=e;return(0,n.jsx)(x.Z,{...t,margin:"normal",fullWidth:!0,id:"phno",label:"Phone Number",autoComplete:"phno",autoFocus:!0,error:!!W.phno,helperText:getErrorMessage(W.phno)})}}),(0,n.jsx)(T.Qr,{name:"email",control:R,defaultValue:"",render:e=>{let{field:t}=e;return(0,n.jsx)(x.Z,{...t,margin:"normal",fullWidth:!0,id:"email",label:"Email Address",autoComplete:"email",autoFocus:!0,type:"email",error:!!W.email,helperText:getErrorMessage(W.email)})}})]}),(0,n.jsxs)(d.ZP,{item:!0,xs:12,md:12,lg:6,children:[(0,n.jsx)(T.Qr,{name:"address",control:R,defaultValue:"",render:e=>{let{field:t}=e;return(0,n.jsx)(x.Z,{...t,margin:"normal",fullWidth:!0,id:"address",label:"Address",autoComplete:"address",autoFocus:!0,error:!!W.address,helperText:getErrorMessage(W.address)})}}),(0,n.jsx)(T.Qr,{name:"city",control:R,defaultValue:"",render:e=>{let{field:t}=e;return(0,n.jsx)(x.Z,{...t,margin:"normal",fullWidth:!0,id:"city",label:"City",autoComplete:"city",autoFocus:!0,error:!!W.city,helperText:getErrorMessage(W.city)})}}),(0,n.jsx)(T.Qr,{name:"zipcode",control:R,defaultValue:"",render:e=>{let{field:t}=e;return(0,n.jsx)(x.Z,{...t,margin:"normal",fullWidth:!0,id:"zipcode",label:"Zip Code",name:"zipcode",autoComplete:"zipcode",autoFocus:!0,error:!!W.zipcode,helperText:getErrorMessage(W.zipcode)})}}),(0,n.jsx)(T.Qr,{name:"state",control:R,defaultValue:"",render:e=>{let{field:t}=e;return(0,n.jsx)(x.Z,{...t,margin:"normal",fullWidth:!0,id:"state",label:"State",name:"state",autoComplete:"state",autoFocus:!0,error:!!W.state,helperText:getErrorMessage(W.state)})}})]})]}),(0,n.jsx)(T.Qr,{name:"location_url",control:R,defaultValue:"",render:e=>{let{field:t}=e;return(0,n.jsx)(x.Z,{...t,margin:"normal",fullWidth:!0,id:"location_url",label:"Location Url",autoComplete:"location_url",autoFocus:!0,error:!!W.location_url,helperText:getErrorMessage(W.location_url)})}}),(0,n.jsx)(m.Z,{variant:"contained",endIcon:(0,n.jsx)(S.Z,{}),style:{width:"300px",left:"125px"},type:"submit",children:"Add Theater"})]})]})})})})]})]})}},36661:function(e,t,r){"use strict";async function handleResponse(e){let t=e.headers.get("Content-Type")||"",r=t.includes("application/json"),n=r?await e.json():await e.text();if(!e.ok){if(r&&null!==n.errors)throw Error(JSON.stringify(n.errors));throw Error(n.message||e.statusText)}return n}async function getDataFromEndPoint(e,t,r){let n="api//"+t,a=e instanceof FormData;if("GET"==r){let e=await fetch(n,{method:r,credentials:"include"});return handleResponse(e).then(e=>e)}let s={method:r,credentials:"include",body:e};console.log(e),a||(s.headers={"Content-Type":"application/json"},s.body=JSON.stringify(e)),console.log(s.body);let i=await fetch(n,s);return handleResponse(i).then(e=>e)}r.d(t,{e:function(){return getDataFromEndPoint}})}},function(e){e.O(0,[5094,3807,3226,5295,4141,8874,414,5445,8725,2971,2472,1744],function(){return e(e.s=14756)}),_N_E=e.O()}]);