(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8801],{69660:function(e,t,a){"use strict";a.d(t,{L:function(){return getListItemTextUtilityClass}});var n=a(26520),s=a(25702);function getListItemTextUtilityClass(e){return(0,s.Z)("MuiListItemText",e)}let r=(0,n.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);t.Z=r},65507:function(e,t,a){"use strict";a.d(t,{Z:function(){return S}});var n=a(20791),s=a(13428),r=a(2265),i=a(57042),o=a(95600),l=a(89975),c=a(35843),d=a(87927),m=a(77820),u=a(45295),p=a(57613),h=a(37663),g=a(26520);let x=(0,g.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),f=(0,g.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);var C=a(69660),j=a(25702);function getMenuItemUtilityClass(e){return(0,j.Z)("MuiMenuItem",e)}let _=(0,g.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var v=a(57437);let b=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],useUtilityClasses=e=>{let{disabled:t,dense:a,divider:n,disableGutters:r,selected:i,classes:l}=e,c=(0,o.Z)({root:["root",a&&"dense",t&&"disabled",!r&&"gutters",n&&"divider",i&&"selected"]},getMenuItemUtilityClass,l);return(0,s.Z)({},l,c)},y=(0,c.ZP)(u.Z,{shouldForwardProp:e=>(0,c.FO)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})(({theme:e,ownerState:t})=>(0,s.Z)({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${_.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${_.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${_.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,l.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${_.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${_.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${x.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${x.inset}`]:{marginLeft:52},[`& .${C.Z.root}`]:{marginTop:0,marginBottom:0},[`& .${C.Z.inset}`]:{paddingLeft:36},[`& .${f.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&(0,s.Z)({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${f.root} svg`]:{fontSize:"1.25rem"}}))),Z=r.forwardRef(function(e,t){let a;let o=(0,d.Z)({props:e,name:"MuiMenuItem"}),{autoFocus:l=!1,component:c="li",dense:u=!1,divider:g=!1,disableGutters:x=!1,focusVisibleClassName:f,role:C="menuitem",tabIndex:j,className:_}=o,Z=(0,n.Z)(o,b),S=r.useContext(m.Z),N=r.useMemo(()=>({dense:u||S.dense||!1,disableGutters:x}),[S.dense,u,x]),k=r.useRef(null);(0,p.Z)(()=>{l&&k.current&&k.current.focus()},[l]);let w=(0,s.Z)({},o,{dense:N.dense,divider:g,disableGutters:x}),P=useUtilityClasses(o),F=(0,h.Z)(k,t);return o.disabled||(a=void 0!==j?j:-1),(0,v.jsx)(m.Z.Provider,{value:N,children:(0,v.jsx)(y,(0,s.Z)({ref:F,role:C,tabIndex:a,component:c,focusVisibleClassName:(0,i.Z)(P.focusVisible,f),className:(0,i.Z)(P.root,_)},Z,{ownerState:w,classes:P}))})});var S=Z},1067:function(e,t,a){Promise.resolve().then(a.bind(a,66213))},66213:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return AddScreen}});var n=a(57437),s=a(2265),r=a(24033),i=a(61865),o=a(38110),l=a(74578),c=a(36661),d=a(3857),m=a(63955),u=a(39227),p=a(43226),h=a(28874),g=a(55594),x=a(84081),f=a(50819),C=a(10654),j=a(65507),_=a(45550),v=a(49050),b=a(45284),y=a.n(b);let Z=l.Ry({screenName:l.Z_().min(1,"Screen Name is required"),timing:l.IX(l.Z_()).min(1,"Select at least one timing"),format:l.Z_().min(1,"Format is required")}),S={rows:20,cols:6,seats:{A:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],D:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}};function AddScreen(){let e=(0,r.useRouter)(),[t,a]=(0,s.useState)((null==S?void 0:S.seats)||{}),{theaterId:l}=(0,r.useParams)(),[b,N]=(0,s.useState)((null==S?void 0:S.rows)||0),[k,w]=(0,s.useState)((null==S?void 0:S.cols)||0),[P,F]=(0,s.useState)(!1);(0,s.useEffect)(()=>{clearSelectedSeats()},[]),(0,s.useEffect)(()=>{handleSeatSubmit()},[b,k]);let handleSeatSubmit=()=>{let e,n={};for(let a=0;a<k;a++){if(a<26)e=String.fromCharCode(65+a);else{let t=String.fromCharCode(64+a/25);e="".concat(t).concat(String.fromCharCode(64+a%25))}n[e]=Array(b).fill(0).map((a,n)=>t&&t[e]&&t[e][n]?t[e][n]:0)}console.log(t),a(n)},clearSelectedSeats=()=>{let e={...t};for(let e in t)t[e].forEach((a,n)=>{2===a&&(t[e][n]=0)});return e},changeEditable=()=>{F(!P)},onSeatClick=(e,n,s)=>{if(t){if(1===e)return;0===e?t[s][n]=3:t[s][n]=0}a({...t})},getClassNameForSeats=e=>{let t;return t=0===e?y().seatNotBooked:1===e?y().seatBooked:2===e?y().seatSelected:y().seatBlocked,"".concat(y().seats," ").concat(t)},{handleSubmit:B,control:I,formState:{errors:E}}=(0,i.cI)({resolver:(0,o.F)(Z)}),getErrorMessage=e=>e&&"string"==typeof e.message?e.message:"";async function onSubmit(a){e.push("/theater/"+l+"/screens/"),a.rows=b,a.col=k,a.seats=t,a.theater_id=l;let n="screen/addScreen";console.log(n);try{await (0,c.e)(a,n,"POST")}catch(e){console.log(e)}}return(0,n.jsxs)(s.Fragment,{children:[(0,n.jsx)(d.ZP,{}),(0,n.jsxs)(m.Z,{maxWidth:"xl",style:{marginLeft:"0px",marginRight:"0px",marginTop:"6%"},children:[(0,n.jsxs)("form",{action:"/screen/addScreen",onSubmit:B(onSubmit),children:[(0,n.jsx)(u.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,n.jsx)(p.Z,{variant:"h4",children:"Add New Screen"})}),(0,n.jsxs)(h.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(h.ZP,{item:!0,xs:12,md:12,lg:4,children:(0,n.jsx)(i.Qr,{name:"screenName",control:I,defaultValue:"",render:e=>{let{field:t}=e;return(0,n.jsx)(g.Z,{...t,label:"Screen Name",error:!!E.screenName,helperText:getErrorMessage(E.screenName),fullWidth:!0,margin:"normal"})}})}),(0,n.jsx)(h.ZP,{item:!0,xs:12,md:12,lg:4,children:(0,n.jsx)(i.Qr,{name:"timing",control:I,defaultValue:[],render:e=>{let{field:t}=e;return(0,n.jsxs)(x.Z,{fullWidth:!0,margin:"normal",error:!!E.timing,children:[(0,n.jsx)(f.Z,{children:"Timing"}),(0,n.jsx)(C.Z,{...t,multiple:!0,label:"Timing",children:["9:00 am","1:00 pm","6:00 pm","10:00 pm"].map(e=>(0,n.jsx)(j.Z,{value:e,children:e},e))}),(0,n.jsx)(_.Z,{id:"component-error-text",children:getErrorMessage(E.timing)})]})}})}),(0,n.jsx)(h.ZP,{item:!0,xs:12,md:12,lg:4,children:(0,n.jsx)(i.Qr,{name:"format",control:I,defaultValue:"",render:e=>{let{field:t}=e;return(0,n.jsxs)(x.Z,{fullWidth:!0,margin:"normal",error:!!E.format,children:[(0,n.jsx)(f.Z,{children:"Format"}),(0,n.jsx)(C.Z,{...t,label:"Format",children:["2D","3D"].map(e=>(0,n.jsx)(j.Z,{value:e,children:e},e))}),(0,n.jsx)(_.Z,{id:"component-error-text",children:getErrorMessage(E.format)})]})}})})]}),(0,n.jsx)(h.ZP,{sx:{flexGrow:1},container:!0,spacing:2,children:(0,n.jsx)(h.ZP,{item:!0,xs:12,lg:12,children:(0,n.jsxs)(h.ZP,{container:!0,justifyContent:"center",spacing:2,children:[(0,n.jsx)(h.ZP,{item:!0,xs:12,md:12,lg:4,children:(0,n.jsx)(g.Z,{disabled:!P,InputProps:{inputProps:{min:5,max:25}},value:b,onChange:e=>N(parseInt(e.target.value)||0),type:"number",label:"Rows",error:!!E.rows,helperText:getErrorMessage(E.rows),fullWidth:!0})}),(0,n.jsx)(h.ZP,{item:!0,xs:12,md:12,lg:4,children:(0,n.jsx)(g.Z,{disabled:!P,InputProps:{inputProps:{min:5,max:12}},value:k,onChange:e=>w(parseInt(e.target.value)||0),type:"number",label:"Columns",error:!!E.columns,helperText:getErrorMessage(E.columns),fullWidth:!0})})]})})}),(0,n.jsx)(h.ZP,{sx:{flexGrow:1},container:!0,spacing:2,children:(0,n.jsx)(h.ZP,{item:!0,xs:12,lg:12,children:(0,n.jsx)(h.ZP,{container:!0,justifyContent:"center",spacing:2,children:P?(0,n.jsx)(u.Z,{gap:2,my:4,children:(0,n.jsx)(v.Z,{variant:"contained",onClick:changeEditable,children:"Show Preview"})}):(0,n.jsxs)(u.Z,{gap:2,my:4,children:[(0,n.jsx)(v.Z,{style:{marginRight:"5px"},variant:"outlined",onClick:changeEditable,children:"Edit Layout"}),(0,n.jsx)(v.Z,{variant:"contained",type:"submit",children:"Submit"})]})})})})]}),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:y().seatsContainer,children:[(0,n.jsxs)("p",{className:y().header,children:["Select Seats to be ",(0,n.jsx)("b",{className:y().headerBlockedText,children:"Removed"})]}),t&&P&&(0,n.jsx)(()=>{let e=[];for(let a in t){let s=t[a].map((e,s)=>(0,n.jsxs)("span",{className:y().seatsHolder,children:[0===s&&(0,n.jsx)("span",{className:y().colName,children:a}),(0,n.jsx)("span",{className:getClassNameForSeats(e),onClick:()=>onSeatClick(e,s,a),children:s+1}),t&&s===t[a].length-1&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]})]},"".concat(a,".").concat(s)));e.push(s)}return(0,n.jsx)("div",{className:y().seatsLeafContainer,children:e})},{}),t&&!P&&(0,n.jsx)(()=>{let e=[];for(let a in t){let s=0,r=t[a].map((e,r)=>(0,n.jsxs)("span",{className:y().seatsHolder,children:[0===r&&(0,n.jsx)("span",{className:y().colName,children:a}),3!==e?(0,n.jsx)("span",{className:getClassNameForSeats(e),children:s+=1}):(0,n.jsx)("span",{className:getClassNameForSeats(1),children:r+1}),t&&r===t[a].length-1&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]})]},"".concat(a,".").concat(r)));e.push(r)}return(0,n.jsx)("div",{className:y().seatsLeafContainer,children:e})},{}),(0,n.jsx)("div",{className:y().cont_screen,children:(0,n.jsx)("div",{className:y().screen})})]})})]})]})}},36661:function(e,t,a){"use strict";async function handleResponse(e){let t=e.headers.get("Content-Type")||"",a=t.includes("application/json"),n=a?await e.json():await e.text();if(!e.ok){if(a&&null!==n.errors)throw Error(JSON.stringify(n.errors));throw Error(n.message||e.statusText)}return n}async function getDataFromEndPoint(e,t,a){let n="api//"+t,s=e instanceof FormData;if("GET"==a){let e=await fetch(n,{method:a,credentials:"include"});return handleResponse(e).then(e=>e)}let r={method:a,credentials:"include",body:e};console.log(e),s||(r.headers={"Content-Type":"application/json"},r.body=JSON.stringify(e)),console.log(r.body);let i=await fetch(n,r);return handleResponse(i).then(e=>e)}a.d(t,{e:function(){return getDataFromEndPoint}})},45284:function(e){e.exports={seatsContainer:"Customize_seatsContainer__ClRBP",seatsHolder:"Customize_seatsHolder__TgBnR",seatsLeafContainer:"Customize_seatsLeafContainer__98f_0",seats:"Customize_seats__85rE3",colName:"Customize_colName__O7gSL",seatSelected0:"Customize_seatSelected0__NFCg_",seatBooked:"Customize_seatBooked__phi0h",seatSelected:"Customize_seatSelected__yjdM2",seatBlocked:"Customize_seatBlocked__sgK9H",paymentButton:"Customize_paymentButton___oUZC",paymentButtonContainer:"Customize_paymentButtonContainer__jl8ZK",inputContainer:"Customize_inputContainer__CKnpW",inputHolder:"Customize_inputHolder__iN2uj",inputField:"Customize_inputField__Ho7rQ",saveSetUpButton:"Customize_saveSetUpButton__CYnaD",header:"Customize_header__SsfQS",headerBlockedText:"Customize_headerBlockedText__mZ8j1",cont_screen:"Customize_cont_screen__PHJgJ",screen:"Customize_screen__MXuqH"}}},function(e){e.O(0,[5094,3807,3226,5295,4141,8874,414,5445,2971,2472,1744],function(){return e(e.s=1067)}),_N_E=e.O()}]);