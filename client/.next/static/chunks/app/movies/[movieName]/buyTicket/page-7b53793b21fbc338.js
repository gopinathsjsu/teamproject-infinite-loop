(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7889],{93287:function(e,t,s){Promise.resolve().then(s.bind(s,95698))},95698:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return AddScreen}});var n=s(57437),a=s(2265),r=s(24033),l=s(61865),i=s(38110),c=s(74578),o=s(3857),d=s(63955),h=s(39227),m=s(43226),x=s(28874),u=s(84081),_=s(50819),g=s(10654),j=s(65507),S=s(45550),f=s(49050),p=s(57190),Z=s.n(p),C=s(74124),b=s(54),k=s(92750);let y=c.Ry({date:c.hT().min(new Date("1900-01-01"),"Date is required").or(c.Z_().nonempty("Date is required")),theater:c.Z_().min(1,"Theater is required"),screen:c.Z_().min(1,"Screen is required"),timing:c.Z_().min(1,"Select at least one timing")}),N={ticketCost:200,seats:{A:[0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0],B:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],D:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}};function AddScreen(){(0,r.useRouter)();let{movieName:e}=(0,r.useParams)(),t=(0,r.useSearchParams)(),s=t.get("theaterId");console.log(s);let[c,p]=(0,a.useState)(!0),[B,v]=(0,a.useState)(null),[E,D]=(0,a.useState)(N.seats||{}),P=[];(0,a.useEffect)(()=>{clearSelectedSeats()},[]);let clearSelectedSeats=()=>{let e={...E};for(let e in E)E[e].forEach((t,s)=>{2===t&&(E[e][s]=0)});D(e)},changeEditable=()=>{p(!c)},{handleSubmit:T,getValues:F,trigger:A,control:W,formState:{errors:q}}=(0,l.cI)({resolver:(0,i.F)(y)}),getErrorMessage=e=>e&&"string"==typeof e.message?e.message:"",onSeatClick=(e,t,s)=>{if(!c){if(E){if(1===e||3===e)return;0===e?E[s][t]=2:E[s][t]=0}D({...E})}},getClassNameForSeats=e=>{let t;return c?(t=Z().disableSeat,3==e&&(t=Z().seatBlocked)):t=0===e?Z().seatNotBooked:1===e?Z().seatBooked:2===e?Z().seatSelected:Z().seatBlocked,"".concat(Z().seats," ").concat(t)};for(let e in P=[],E)E[e].forEach((t,s)=>{2===t&&P.push("".concat(e).concat(s+1))});async function onSubmit(){console.log(F())}return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(o.ZP,{}),(0,n.jsxs)(d.Z,{maxWidth:!1,style:{marginLeft:"0px",marginRight:"0px",marginTop:"6%"},children:[(0,n.jsxs)("form",{action:"/screen/addScreen",onSubmit:T(onSubmit),children:[(0,n.jsx)(h.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,n.jsx)(m.Z,{variant:"h4",children:"Book Ticket"})}),(0,n.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(x.ZP,{sx:{display:"flex",justifyContent:"center",mt:"16px"},item:!0,xs:12,md:12,lg:3,children:(0,n.jsx)(l.Qr,{name:"date",control:W,defaultValue:null,render:e=>{let{field:t}=e;return(0,n.jsx)(C._,{dateAdapter:k.y,children:(0,n.jsx)(b.M,{sx:{width:"100%"},label:"Select Date",...t})})}})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:12,lg:3,children:(0,n.jsx)(l.Qr,{name:"theater",control:W,defaultValue:"",render:e=>{let{field:t}=e;return(0,n.jsxs)(u.Z,{disabled:!c,fullWidth:!0,margin:"normal",error:!!q.theater,children:[(0,n.jsx)(_.Z,{children:"Theater"}),(0,n.jsx)(g.Z,{...t,label:"Theater",children:["2D","3D"].map(e=>(0,n.jsx)(j.Z,{value:e,children:e},e))}),(0,n.jsx)(S.Z,{id:"component-error-text",children:getErrorMessage(q.theater)})]})}})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:12,lg:3,children:(0,n.jsx)(l.Qr,{name:"screen",control:W,defaultValue:"",render:e=>{let{field:t}=e;return(0,n.jsxs)(u.Z,{disabled:!c,fullWidth:!0,margin:"normal",error:!!q.screen,children:[(0,n.jsx)(_.Z,{children:"Screen"}),(0,n.jsx)(g.Z,{...t,label:"Screen",children:["2D","3D"].map(e=>(0,n.jsx)(j.Z,{value:e,children:e},e))}),(0,n.jsx)(S.Z,{id:"component-error-text",children:getErrorMessage(q.screen)})]})}})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:12,lg:3,children:(0,n.jsx)(l.Qr,{name:"timing",control:W,defaultValue:"",render:e=>{let{field:t}=e;return(0,n.jsxs)(u.Z,{disabled:!c,fullWidth:!0,margin:"normal",error:!!q.timing,children:[(0,n.jsx)(_.Z,{children:"Timing"}),(0,n.jsx)(g.Z,{...t,label:"Timing",children:["2D","3D"].map(e=>(0,n.jsx)(j.Z,{value:e,children:e},e))}),(0,n.jsx)(S.Z,{id:"component-error-text",children:getErrorMessage(q.timing)})]})}})})]}),(0,n.jsx)(x.ZP,{sx:{flexGrow:1},container:!0,spacing:2,children:(0,n.jsx)(x.ZP,{item:!0,xs:12,lg:12,children:(0,n.jsx)(x.ZP,{container:!0,justifyContent:"center",spacing:2,children:c?(0,n.jsx)(h.Z,{gap:2,my:4,children:(0,n.jsx)(f.Z,{variant:"contained",onClick:function(){A();let e=F();null!=e.date&&""!=e.screen&&""!=e.theater&&""!=e.timing&&changeEditable()},children:"Apply Changes"})}):(0,n.jsxs)(h.Z,{gap:2,my:4,children:[(0,n.jsx)(f.Z,{style:{marginRight:"5px"},variant:"outlined",onClick:changeEditable,children:"Change Theater"}),0!==P.length&&(0,n.jsxs)(f.Z,{variant:"contained",type:"submit",onClick:()=>{onSubmit()},children:["Book Ticket Pay Rs.",P.length*((null==N?void 0:N.ticketCost)||0)]})]})})})})]}),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:Z().seatsContainer,children:[E&&(0,n.jsx)(()=>{let e=[];for(let t in E){let s=0,a=E[t].map((e,a)=>(0,n.jsxs)("span",{className:Z().seatsHolder,children:[0===a&&(0,n.jsx)("span",{className:Z().colName,children:t}),3!=e?(0,n.jsx)("span",{className:getClassNameForSeats(e),onClick:()=>onSeatClick(e,a,t),children:s+=1}):(0,n.jsx)("span",{className:getClassNameForSeats(e),children:1}),E&&a===E[t].length-1&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]})]},"".concat(t,".").concat(a)));e.push(a)}return(0,n.jsx)("div",{className:Z().seatsLeafContainer,children:e})},{}),(0,n.jsx)("div",{className:Z().cont_screen,children:(0,n.jsx)("div",{className:Z().screen})})]})})]})]})}},57190:function(e){e.exports={seatsContainer:"Seats_seatsContainer__YZqEG",seatsHolder:"Seats_seatsHolder__f6_kG",seatsLeafContainer:"Seats_seatsLeafContainer__UnyTc",seats:"Seats_seats__5AWnh",colName:"Seats_colName__Oryp_",seatSelected0:"Seats_seatSelected0__ahb4H",seatBlocked:"Seats_seatBlocked__nFpXD",seatBooked:"Seats_seatBooked__fbW_L",disableSeat:"Seats_disableSeat__Dt2Zz",seatSelected:"Seats_seatSelected__VsJHC",paymentButton:"Seats_paymentButton__xsBFD",paymentButtonContainer:"Seats_paymentButtonContainer__6ssQg",cont_screen:"Seats_cont_screen__K93X0",screen:"Seats_screen__9amot"}}},function(e){e.O(0,[5094,3807,3226,5295,4141,8874,414,5445,6375,6336,7827,9633,2971,2472,1744],function(){return e(e.s=93287)}),_N_E=e.O()}]);