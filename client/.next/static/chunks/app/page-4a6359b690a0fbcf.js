(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{5210:function(e,t,o){Promise.resolve().then(o.bind(o,49995))},49995:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Home}});var s=o(57437),n=o(2265),r=o(74741),i=o(39227),a=o(49050),l=o(26931),d=o(98075),c=o(84081),h=o(50819),p=o(10654),u=o(65507),m=o(28874);o(98520),o(9499);var x=o(24033),v=o(36661),f=o(16896),g=o(83686),j=o(36718),w=o(35843),y=o(26398),b=o(55594);function SampleNextArrow(e){let{className:t,style:o,onClick:n}=e;return(0,s.jsx)("div",{className:t,style:{...o,fontSize:"50px",color:"#00378f",display:"block",right:"-5px"},onClick:n})}function SamplePrevArrow(e){let{className:t,style:o,onClick:n}=e;return(0,s.jsx)("div",{className:t,style:{...o,fontSize:"50px",color:"#00378f",display:"block",left:"-2px",zIndex:"1"},onClick:n})}let S={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},Z=(0,w.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1,accept:"image/*"});var movieCarousel=()=>{let[e,t]=(0,n.useState)(!1),[o,w]=(0,n.useState)([]),[C,N]=(0,n.useState)([]),[k,_]=(0,n.useState)(""),[A,T]=(0,n.useState)(!1),[M,P]=(0,n.useState)(null),I=(0,f.Z)(),E=I.isAdmin,[D,L]=(0,n.useState)({posterName:""}),z=(0,x.useRouter)(),fetchMovieData=async()=>{let e=await (0,v.e)("","poster/all","GET"),t=e.data,o=t.map(e=>({id:e.id,title:e.title,poster_url:e.poster_url,poster_id:e.poster_id}));w(o)},fetchMovies=async()=>{let e=await (0,v.e)("","movie/all","GET"),t=e.movies,o=t.map(e=>({id:e.id,title:e.title,poster_url:e.poster_url}));N(o)};(0,n.useEffect)(()=>{fetchMovieData(),fetchMovies()},[]);let F={dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:3e3,pauseOnHover:!0,nextArrow:(0,s.jsx)(SampleNextArrow,{}),prevArrow:(0,s.jsx)(SamplePrevArrow,{})},handleImageClick=e=>{console.log(e),console.log(o[Number(e)].poster_id);let t=o[Number(e)].poster_id;z.push("/movie/".concat(t))},submitForm=async e=>{e.preventDefault();let t=new FormData;M&&t.append("poster",M),t.append("posterName",D.posterName),t.append("posterId",k),console.log(t),await (0,v.e)(t,"poster/addPoster","POST"),P(null),fetchMovieData()},R=o.map(e=>e.poster_url);return(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(r.Z,{...F,children:R.map((e,t)=>(0,s.jsx)("div",{onClick:()=>handleImageClick(t),style:{cursor:"pointer"},children:(0,s.jsx)("img",{src:e,alt:"Slide ".concat(t),style:{width:"100%",height:"auto"}})},t))}),E&&(0,s.jsx)(a.Z,{variant:"contained",onClick:()=>{t(!0)},children:"Add Poster"}),(0,s.jsx)(l.Z,{open:e,onClose:()=>{t(!1)},children:(0,s.jsx)(i.Z,{sx:S,children:(0,s.jsx)(d.Z,{direction:"column",spacing:2,children:(0,s.jsx)("form",{encType:"multipart/form-data",onSubmit:submitForm,children:(0,s.jsxs)(c.Z,{fullWidth:!0,children:[(0,s.jsx)(h.Z,{id:"single-select-label",children:"Movie"}),(0,s.jsx)(p.Z,{labelId:"single-select-label",value:k,onChange:e=>{let{value:t}=e.target;console.log(t),_(t),console.log(k)},children:C.map(e=>(0,s.jsx)(u.Z,{value:e.id,children:e.title},e.id))}),(0,s.jsx)(m.ZP,{container:!0,spacing:2,children:(0,s.jsx)(m.ZP,{item:!0,xs:12,md:12,lg:12,children:(0,s.jsx)(b.Z,{label:"Poster Name",name:"posterName",placeholder:"Poster Name",fullWidth:!0,variant:"outlined",type:"text",onChange:e=>{let t=e.target.name,o=e.target.value;L(e=>({...e,[t]:o}))}})})}),(0,s.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",marginTop:1},children:(0,s.jsxs)(a.Z,{sx:{width:200},component:"label",variant:"contained",startIcon:(0,s.jsx)(g.Z,{}),children:[M?(0,s.jsxs)(s.Fragment,{children:["File Uploaded ",(0,s.jsx)(j.Z,{sx:{ml:1}})]}):"Upload Image",(0,s.jsx)(Z,{type:"file",onChange:e=>{e.preventDefault();let t=e.target.files[0];P(t)}})]})}),(0,s.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",marginTop:1},children:(0,s.jsx)(a.Z,{variant:"contained",endIcon:(0,s.jsx)(y.Z,{}),type:"submit",children:"Submit"})})]})})})})})]})},C=o(15133),N=o(2589),k=o(45461),_=o(43226),A=o(88469);let MovieCard=e=>{let{movie:t,onImageClick:o}=e,[r,a]=(0,n.useState)(!1);return(0,s.jsx)(C.Z,{sx:{width:200,height:300,m:1,boxShadow:3,position:"relative",overflow:"hidden","&:hover":{boxShadow:6}},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:(0,s.jsxs)(N.Z,{onClick:()=>o(t.id),children:[(0,s.jsx)(k.Z,{component:"img",height:"300",image:t.banner_url,alt:t.title,sx:{cursor:"pointer",transition:"transform 0.5s ease",transform:r?"scale(1.1)":"scale(1)"}}),r?(0,s.jsxs)(i.Z,{sx:{position:"absolute",bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",p:1,width:"100%",height:"100%"},children:[(0,s.jsx)(_.Z,{variant:"h6",component:"div",children:t.title}),(0,s.jsx)(_.Z,{variant:"body2",children:t.genres})]}):(0,s.jsx)(A.Z,{children:(0,s.jsx)(_.Z,{variant:"body2",color:"text.secondary",children:t.category})})]})})};function recommendedMovies_SampleNextArrow(e){let{className:t,style:o,onClick:n}=e;return(0,s.jsx)("div",{className:t,style:{...o,fontSize:"100px",color:"#00378f",display:"block",right:"20px",zIndex:1},onClick:n})}function recommendedMovies_SamplePrevArrow(e){let{className:t,style:o,onClick:n}=e;return(0,s.jsx)("div",{className:t,style:{...o,fontSize:"100px",color:"#00378f",display:"block",left:"2px",zIndex:1},onClick:n})}var recommendedMovies=()=>{let e=(0,x.useRouter)(),[t,o]=(0,n.useState)([]),handleCardClick=t=>{e.push("/movie/".concat(t))};(0,n.useEffect)(()=>{let fetchData=async()=>{let e=await (0,v.e)("","movie/getRecommendedMovies","GET"),t=e.data;o(t)};fetchData()},[]);let a={dots:!1,infinite:!0,speed:500,slidesToShow:t.length<6?t.length:6,slidesToScroll:1,nextArrow:(0,s.jsx)(recommendedMovies_SampleNextArrow,{className:void 0,style:void 0,onClick:void 0}),prevArrow:(0,s.jsx)(recommendedMovies_SamplePrevArrow,{className:void 0,style:void 0,onClick:void 0})};return(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(_.Z,{variant:"h6",sx:{mb:2},children:"Recommended Movies"}),(0,s.jsx)(r.Z,{...a,children:t.map((e,t)=>(0,s.jsx)(MovieCard,{movie:e,onImageClick:handleCardClick},t))}),(0,s.jsxs)(i.Z,{mt:4,sx:{width:"100%",overflow:"hidden"},children:[(0,s.jsx)("style",{children:"@media (min-width: 1280px) { \n                        .responsive-banner {\n                                height: 120px; \n                            }\n                        }\n                        @media (min-width: 1440px) { \n                        .responsive-banner {\n                                height: 200px; \n                            }\n                        }\n                    "}),(0,s.jsx)("a",{href:"./rewards",children:(0,s.jsx)("img",{className:"responsive-banner",src:"https://drive.google.com/uc?id=1RyP7TcOdok3IYMVMwE364m9ghuLFGRvL",alt:"Banner",style:{width:"100%",objectFit:"cover",objectPosition:"center"}})})]})]})};let Theatercard=e=>{let{theater:t,onImageClick:o}=e,[r,a]=(0,n.useState)(!1);return(0,s.jsx)(C.Z,{sx:{width:350,height:190,m:1,boxShadow:3,position:"relative",overflow:"hidden","&:hover":{boxShadow:6}},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:(0,s.jsxs)(N.Z,{onClick:()=>o(t.id),children:[(0,s.jsx)(k.Z,{component:"img",width:"100%",height:"100%",image:t.image_url,alt:t.title,sx:{cursor:"pointer",transition:"transform 0.5s ease",transform:r?"scale(1.1)":"scale(1)"}}),r?(0,s.jsxs)(i.Z,{sx:{position:"absolute",bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",p:1,width:"100%",height:"100%"},children:[(0,s.jsx)(_.Z,{variant:"h6",component:"div",children:t.name}),(0,s.jsx)(_.Z,{variant:"body2",children:t.city})]}):(0,s.jsx)(A.Z,{children:(0,s.jsx)(_.Z,{variant:"body2",color:"text.secondary",children:t.state})})]})})};function theatersNearBy_SampleNextArrow(e){let{className:t,style:o,onClick:n}=e;return(0,s.jsx)("div",{className:t,style:{...o,fontSize:"100px",color:"#00378f",display:"block",right:"20px",zIndex:1},onClick:n})}function theatersNearBy_SamplePrevArrow(e){let{className:t,style:o,onClick:n}=e;return(0,s.jsx)("div",{className:t,style:{...o,fontSize:"100px",color:"#00378f",display:"block",left:"2px",zIndex:1},onClick:n})}var theatersNearBy=e=>{let{location:t}=e,o=(0,x.useRouter)(),a=(0,f.Z)(),[l,d]=(0,n.useState)([]),handleCardClick=e=>{o.push("/theater/".concat(e,"/screens"))};(0,n.useEffect)(()=>{let fetchData=async()=>{a.pincode;let e=await (0,v.e)("","theater/getTheatersNearBy/"+t,"GET"),o=e.theaters;d(o)};fetchData()},[t]);let c={dots:!1,infinite:!0,speed:500,slidesToShow:l.length,slidesToScroll:1,nextArrow:(0,s.jsx)(theatersNearBy_SampleNextArrow,{className:void 0,style:void 0,onClick:void 0}),prevArrow:(0,s.jsx)(theatersNearBy_SamplePrevArrow,{className:void 0,style:void 0,onClick:void 0})};return(0,s.jsxs)(i.Z,{children:[l.length?(0,s.jsx)(_.Z,{variant:"h6",sx:{mb:2},children:"Theaters Near By"}):"",(0,s.jsx)(r.Z,{...c,children:l.map((e,t)=>(0,s.jsx)(Theatercard,{theater:e,onImageClick:handleCardClick},t))})]})};function Home(){let e=(0,f.Z)(),[t,o]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let t=e.pincode;t&&o(t)},[e]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(movieCarousel,{}),(0,s.jsx)(recommendedMovies,{}),t&&(0,s.jsx)(theatersNearBy,{location:t})]})}},36661:function(e,t,o){"use strict";async function handleResponse(e){let t=e.headers.get("Content-Type")||"",o=t.includes("application/json"),s=o?await e.json():await e.text();if(!e.ok){if(o&&null!==s.errors)throw Error(JSON.stringify(s.errors));throw Error(s.message||e.statusText)}return s}async function getDataFromEndPoint(e,t,o){let s="http://ec2-3-101-12-15.us-west-1.compute.amazonaws.com/api/"+t,n=e instanceof FormData;if("GET"==o){let e=await fetch(s,{method:o,credentials:"include"});return handleResponse(e).then(e=>e)}let r={method:o,credentials:"include",body:e};n||(r.headers={"Content-Type":"application/json"},r.body=JSON.stringify(e));let i=await fetch(s,r);return handleResponse(i).then(e=>e)}o.d(t,{e:function(){return getDataFromEndPoint}})},16896:function(e,t,o){"use strict";var s=o(94660),n=o(74810);let r=(0,s.Ue)((0,n.tJ)(e=>({authUser:null,isLoggedIn:!1,requestLoading:!1,user:null,pincode:null,isAdmin:!1,setIsAdmin:t=>e(e=>({...e,isAdmin:t})),setUser:t=>e(e=>({...e,user:t})),setLoggedIn:()=>e(e=>({...e,isLoggedIn:!0})),setLoggedOut:()=>e(e=>({...e,isLoggedIn:!1})),setAuthUser:t=>e(e=>({...e,authUser:t})),setPinCode:t=>e(e=>({...e,pincode:t})),setRequestLoading:t=>e(e=>({...e,requestLoading:t})),reset:()=>e({authUser:null,requestLoading:!1})}),{name:"user-storage"}));t.Z=r}},function(e){e.O(0,[5094,3226,4876,5295,8874,1444,2171,8500,5594,644,5166,9785,3322,2971,2472,1744],function(){return e(e.s=5210)}),_N_E=e.O()}]);