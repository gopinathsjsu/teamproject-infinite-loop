(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8223],{61066:function(e,r,s){Promise.resolve().then(s.bind(s,79469))},79469:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return SignUp}});var i=s(57437),n=s(2265),t=s(61865),a=s(24033),o=s(3283),l=s(49050),c=s(3857),d=s(55594),u=s(25210),m=s(28874),h=s(39227),p=s(16531),f=s(43226),g=s(63955),x=s(24256),w=s(56413),y=s(5925),j=s(38110),P=s(80528);function Copyright(e){return(0,i.jsxs)(f.Z,{variant:"body2",color:"text.secondary",align:"center",...e,children:["Copyright \xa9 ",(0,i.jsx)(u.Z,{color:"inherit",href:"https://mui.com/",children:"Box Office"})," ",new Date().getFullYear(),"."]})}function SignUp(){let[e,r]=n.useState(!1),{register:s,handleSubmit:Z,formState:{errors:E}}=(0,t.cI)({resolver:(0,j.F)(P._)}),b=(0,a.useRouter)(),getErrorMessage=e=>e&&"string"==typeof e.message?e.message:"";async function registerUser(e){r(!0);try{return await (0,x.y4)(JSON.stringify(e)),b.push("/signin")}catch(e){e instanceof Error?(0,w.zG)(e):(y.ZP.error(e.message),console.log("Error message:",e.message))}finally{r(!1)}}return(0,i.jsxs)(g.Z,{component:"main",maxWidth:"xs",children:[(0,i.jsx)(c.ZP,{}),(0,i.jsxs)(h.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.jsx)(o.Z,{sx:{m:1,bgcolor:"secondary.main"},children:(0,i.jsx)(p.Z,{})}),(0,i.jsx)(f.Z,{component:"h1",variant:"h5",children:"Sign up"}),(0,i.jsxs)(h.Z,{component:"form",noValidate:!0,onSubmit:Z(e=>{registerUser(e)}),sx:{mt:3},children:[(0,i.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,i.jsx)(m.ZP,{item:!0,xs:12,children:(0,i.jsx)(d.Z,{...s("name"),fullWidth:!0,id:"name",label:"Full Name",autoFocus:!0,error:!!E.name,helperText:getErrorMessage(E.name)})}),(0,i.jsx)(m.ZP,{item:!0,xs:12,children:(0,i.jsx)(d.Z,{...s("email"),fullWidth:!0,id:"email",label:"Email Address",autoComplete:"email",error:!!E.email,helperText:getErrorMessage(E.email)})}),(0,i.jsx)(m.ZP,{item:!0,xs:12,children:(0,i.jsx)(d.Z,{...s("password"),fullWidth:!0,type:"password",id:"password",label:"Password",autoComplete:"new-password",error:!!E.password,helperText:getErrorMessage(E.password)})}),(0,i.jsx)(m.ZP,{item:!0,xs:12,children:(0,i.jsx)(d.Z,{...s("confirmPassword"),fullWidth:!0,type:"password",id:"confirmPassword",label:"Confirm Password",error:!!E.confirmPassword,helperText:getErrorMessage(E.confirmPassword)})})]}),(0,i.jsx)(l.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:e?(0,i.jsx)("span",{children:"Loading..."}):(0,i.jsx)("span",{children:" Sign Up"})}),(0,i.jsx)(m.ZP,{container:!0,justifyContent:"flex-end",children:(0,i.jsx)(m.ZP,{item:!0,children:(0,i.jsx)(u.Z,{href:"/signin",variant:"body2",children:"Already have an account? Sign in"})})})]})]}),(0,i.jsx)(Copyright,{sx:{mt:5}})]})}},24256:function(e,r,s){"use strict";s.d(r,{NI:function(){return apiLoginUser},y4:function(){return apiRegisterUser}});let i="http://ec2-3-101-12-15.us-west-1.compute.amazonaws.com/api";async function handleResponse(e){let r=e.headers.get("Content-Type")||"",s=r.includes("application/json"),i=s?await e.json():await e.text();if(!e.ok){if(s&&null!==i.errors)throw Error(JSON.stringify(i.errors));throw Error(i.message||e.statusText)}return i}async function apiRegisterUser(e){let r=await fetch("".concat(i,"/user/signup"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:e});return handleResponse(r).then(e=>e.message)}async function apiLoginUser(e){let r=await fetch("".concat(i,"/user/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:e});return console.log(r),handleResponse(r).then(e=>e.data)}},56413:function(e,r,s){"use strict";s.d(r,{zG:function(){return handleApiError}}),s(79874);var i=s(5925);function handleApiError(e){try{let r;try{r=JSON.parse(e.message)}catch(r){i.ZP.error(e.message);return}if("object"==typeof r&&null!==r&&"fieldErrors"in r){let e=r.fieldErrors;Object.keys(e).forEach(r=>{let s=e[r];if(s.length>0){let e=s[0];i.ZP.error(e)}})}}catch(e){i.ZP.error(e)}}s(62601)},80528:function(e,r,s){"use strict";s.d(r,{V:function(){return t},_:function(){return n}});var i=s(74578);let n=i.z.object({name:i.z.string({required_error:"Name is required"}).min(1,"Full name is required"),email:i.z.string({required_error:"Email is required"}).min(1,"Email is required").email("Email is invalid"),password:i.z.string({required_error:"Password is required"}).min(1,"Password is required").min(8,"Password must be more than 8 characters").max(32,"Password must be less than 32 characters"),confirmPassword:i.z.string({required_error:"Confirm your password"}).min(1,"Confirm your password")}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"Passwords do not match"}),t=i.z.object({email:i.z.string({required_error:"Email is required"}).min(1,"Email is required").email("Email is invalid"),password:i.z.string({required_error:"Password is required"}).min(1,"Password is required").min(8,"Password must be at least 8 characters")})}},function(e){e.O(0,[5094,3226,4876,5295,8874,1444,2171,8500,5594,644,329,2554,2971,2472,1744],function(){return e(e.s=61066)}),_N_E=e.O()}]);