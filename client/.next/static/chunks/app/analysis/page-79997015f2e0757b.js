(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2490],{1295:function(e,t,a){Promise.resolve().then(a.bind(a,63881))},63881:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return BarsDataset}});var s=a(57437),n=a(2265),i=a(30107),r=a(14452),l=a(83304),c=a(28874),o=a(43226),h=a(71932),d=a(55594),u=a(69998),f=a(68482),x=a(84081),p=a(10654),m=a(65507),y=a(28017),g=a(36661),movieDay=()=>{let[e,t]=(0,n.useState)([]),[a,i]=(0,n.useState)(""),[r,l]=(0,n.useState)([]),[c,o]=(0,n.useState)([]);return(0,n.useEffect)(()=>{let fetchMovieData=async()=>{try{let e=await (0,g.e)("","movie/all","GET");t(e.movies),e.movies.length>0&&i(e.movies[0].id)}catch(e){console.error("Error fetching movie data:",e)}};fetchMovieData()},[]),(0,n.useEffect)(()=>{let fetchOccupancyData=async()=>{try{if(a.length>0){let e=await (0,g.e)("","movie/getMovieOccupancyDayWise/".concat(a),"GET");o(e.data);let t=[];for(let a=0;a<e.data.length;a++)t.push(a+1);l(t)}}catch(e){console.error("Error fetching occupancy data:",e)}};fetchOccupancyData()},[a]),(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Z,{fullWidth:!0,children:(0,s.jsx)(p.Z,{value:a,onChange:e=>{let t=e.target.value;i(t)},displayEmpty:!0,inputProps:{"aria-label":"Without label"},children:e.map(e=>(0,s.jsx)(m.Z,{value:e.id,children:e.title},e.id))})}),0!=r.length&&c.length>0&&(0,s.jsx)(y.w,{xAxis:[{data:r}],series:[{data:c}],width:500,height:300})]})};let v={width:500,height:300,sx:{[".".concat(r.x.left," .").concat(r.x.label)]:{transform:"translate(-20px, 0)"}}},j={width:400,height:300};function BarsDataset(){let[e,t]=n.useState([]),[a,r]=n.useState([]),[x,p]=n.useState([]),[m,y]=n.useState(null),[w,b]=n.useState([]),[Z,E]=n.useState([]),[D,P]=n.useState([]),[T,S]=n.useState(null);return n.useEffect(()=>{let fetchMovies=async()=>{try{let e=await (0,g.e)("","movie/all","GET");t(e.movies),y(e.movies[0].id),b([]),E([])}catch(e){console.error("Failed to fetch data:",e)}},fetchPieData=async()=>{try{let e=await (0,g.e)("","screen/getTicketsBookedInTheaters","GET"),t=e.data.filter(e=>0!=e.value),a=e.data.map(e=>e.value).reduce((e,t)=>e+t,0);S(a),P(t)}catch(e){console.error("Failed to fetch data:",e)}};fetchMovies(),fetchPieData()},[]),n.useEffect(()=>{let fetchData=async()=>{try{let e=await (0,g.e)("","screen/getTicketsBoughtByTheatersLocation/".concat(m),"GET"),t=e.data;p(t),r(Object.keys(t))}catch(e){console.error("Failed to fetch data:",e)}};null!=m&&fetchData()},[m]),(0,s.jsxs)(l.Z,{sx:{ml:10,mt:5},children:[(0,s.jsxs)(c.ZP,{spacing:2,container:!0,children:[(0,s.jsxs)(c.ZP,{item:!0,xs:6,children:[(0,s.jsx)(o.Z,{variant:"h4",children:"Movie vs Location vs Theater"}),(0,s.jsxs)(c.ZP,{item:!0,xs:12,sx:{display:"flex"},children:[(0,s.jsx)(c.ZP,{item:!0,xs:6,children:(0,s.jsx)(h.Z,{disableClearable:!0,options:e,getOptionLabel:e=>e.title,onChange:(e,t)=>{y(t?t.id:"")},sx:{mr:2,width:"90%"},renderInput:e=>(0,s.jsx)(d.Z,{...e,label:"Movie"})})}),(0,s.jsx)(c.ZP,{item:!0,xs:6,children:(0,s.jsx)(h.Z,{disableClearable:!0,options:a,getOptionLabel:e=>e,sx:{width:"90%"},onChange:(e,t)=>{if(t){b(Object.keys(x[t]));let e=Object.keys(x[t]).map(e=>x[t][e]);E(e)}},renderInput:e=>(0,s.jsx)(d.Z,{...e,label:"City"})})})]}),(0,s.jsx)(c.ZP,{item:!0,xs:12,children:0!==w.length&&0!==Z.length&&(0,s.jsx)(i.v,{xAxis:[{scaleType:"band",data:w}],series:[{data:Z}],...v})})]}),(0,s.jsxs)(c.ZP,{item:!0,xs:6,children:[(0,s.jsx)(o.Z,{variant:"h4",children:"Theaters Booking"}),(0,s.jsx)(c.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:0!=D.length&&(0,s.jsx)(u.u,{margin:{top:20,left:10,right:400},series:[{outerRadius:80,data:D,arcLabel:e=>{let t=e.value/T;return"".concat((100*t).toFixed(0),"%")}}],slotProps:{legend:{direction:"column",position:{vertical:"middle",horizontal:"right"},padding:0}},sx:{["& .".concat(f.KT.root)]:{fill:"white",fontSize:14}},...j})})]})]}),(0,s.jsxs)(c.ZP,{sx:{display:"flex",justifyContent:"center"},spacing:2,container:!0,children:[(0,s.jsx)(o.Z,{variant:"h4",children:"Movie vs Date Booking"}),(0,s.jsx)(c.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:(0,s.jsx)(movieDay,{})})]})]})}},36661:function(e,t,a){"use strict";async function handleResponse(e){let t=e.headers.get("Content-Type")||"",a=t.includes("application/json"),s=a?await e.json():await e.text();if(!e.ok){if(a&&null!==s.errors)throw Error(JSON.stringify(s.errors));throw Error(s.message||e.statusText)}return s}async function getDataFromEndPoint(e,t,a){let s="http://ec2-3-101-12-15.us-west-1.compute.amazonaws.com/api/"+t,n=e instanceof FormData;if("GET"==a){let e=await fetch(s,{method:a,credentials:"include"});return handleResponse(e).then(e=>e)}let i={method:a,credentials:"include",body:e};n||(i.headers={"Content-Type":"application/json"},i.body=JSON.stringify(e));let r=await fetch(s,i);return handleResponse(r).then(e=>e)}a.d(t,{e:function(){return getDataFromEndPoint}})}},function(e){e.O(0,[5094,3226,4876,5295,8874,1444,2171,8500,5594,7827,9858,1932,7613,2971,2472,1744],function(){return e(e.s=1295)}),_N_E=e.O()}]);