(()=>{var e={};e.id=3438,e.ids=[3438],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},68920:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c});var s=r(67096),a=r(16132),n=r(37284),i=r.n(n),l=r(32564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["theater",{children:["[theaterId]",{children:["editScreen",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,69108)),"/Users/saideekshithkatukojwala/Documents/Code/Projects/box-office/client/src/app/theater/[theaterId]/editScreen/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,79113)),"/Users/saideekshithkatukojwala/Documents/Code/Projects/box-office/client/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/saideekshithkatukojwala/Documents/Code/Projects/box-office/client/src/app/theater/[theaterId]/editScreen/page.tsx"],m="/theater/[theaterId]/editScreen/page",x={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/theater/[theaterId]/editScreen/page",pathname:"/theater/[theaterId]/editScreen",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6977:(e,t,r)=>{Promise.resolve().then(r.bind(r,16694))},16694:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>EditScreen});var s=r(30784),a=r(9885),n=r.n(a),i=r(57114),l=r(66558),o=r(83894),c=r(19098),d=r(15050),m=r(98331),x=r(39966),u=r.n(x),h=r(43872),p=r(33987),g=r.n(p),j=r(21971),f=r.n(j),S=r(92870),b=r.n(S),v=r(58111),_=r.n(v),N=r(97445),y=r.n(N),P=r(51892),k=r.n(P),C=r(88707),w=r.n(C),E=r(34550),I=r.n(E),q=r(16614),F=r.n(q),D=r(97870),M=r.n(D);let G=c.Ry({screenName:c.Z_().min(1,"Screen Name is required"),timing:c.IX(c.Z_()).min(1,"Select at least one timing"),format:c.Z_().min(1,"Format is required")}),R={rows:20,cols:6,seats:{A:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],D:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}};function EditScreen(){let e=(0,i.useRouter)(),[t,r]=(0,a.useState)({}),[c,x]=(0,a.useState)(R?.seats||{}),{theaterId:p}=(0,i.useParams)(),[j,S]=(0,a.useState)(R?.rows||0),[v,N]=(0,a.useState)(R?.cols||0),[P,C]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(clearSelectedSeats(),null!=localStorage.getItem("screenDetails")){let e=localStorage.getItem("screenDetails");if(null==e)e="";else{let t=JSON.parse(e);T("screenName",t.name),T("format",t.format),T("timing",t.timings),r(t),x(t.seatDetails),S(t.rows),N(t.columns)}}},[]);let clearSelectedSeats=()=>{let e={...c};for(let e in c)c[e].forEach((t,r)=>{3===t&&(c[e][r]=0)});return x({...c}),e},changeEditable=()=>{C(!P)},onSeatClick=(e,t,r)=>{if(c){if(1===e)return;0===e?c[r][t]=3:c[r][t]=0}x({...c})},getClassNameForSeats=e=>{let t;return t=0===e?M().seatNotBooked:1===e?M().seatBooked:2===e?M().seatSelected:M().seatBlocked,`${M().seats} ${t}`},{handleSubmit:E,control:q,formState:{errors:D},setValue:T}=(0,l.cI)({resolver:(0,o.F)(G)}),getErrorMessage=e=>e&&"string"==typeof e.message?e.message:"";async function onSubmit(r){r.rows=j,r.col=v,r.seats=c,r.theater_id=p,r.id=t.id;let s="screen/updateScreen";console.log(s);try{await (0,d.e)(r,s,"POST"),e.push("/theater/"+p+"/screens")}catch(e){console.log(e)}}return(0,s.jsxs)(n().Fragment,{children:[s.jsx(m.Z,{}),(0,s.jsxs)(u(),{maxWidth:"xl",style:{marginLeft:"0px",marginRight:"0px",marginTop:"6%"},children:[(0,s.jsxs)("form",{action:"/screen/addScreen",onSubmit:E(onSubmit),children:[s.jsx(h.default,{sx:{display:"flex",justifyContent:"center"},children:s.jsx(g(),{variant:"h4",children:"Edit Screen"})}),(0,s.jsxs)(f(),{container:!0,spacing:2,children:[s.jsx(f(),{item:!0,xs:12,md:12,lg:4,children:s.jsx(l.Qr,{name:"screenName",control:q,defaultValue:"",render:({field:e})=>s.jsx(b(),{...e,label:"Screen Name",error:!!D.screenName,helperText:getErrorMessage(D.screenName),fullWidth:!0,margin:"normal"})})}),s.jsx(f(),{item:!0,xs:12,md:12,lg:4,children:s.jsx(l.Qr,{name:"timing",control:q,defaultValue:[],render:({field:e})=>(0,s.jsxs)(_(),{fullWidth:!0,margin:"normal",error:!!D.timing,children:[s.jsx(y(),{children:"Timing"}),s.jsx(k(),{...e,multiple:!0,label:"Timing",children:["9:00 am","1:00 pm","6:00 pm","10:00 pm"].map(e=>s.jsx(w(),{value:e,children:e},e))}),s.jsx(I(),{id:"component-error-text",children:getErrorMessage(D.timing)})]})})}),s.jsx(f(),{item:!0,xs:12,md:12,lg:4,children:s.jsx(l.Qr,{name:"format",control:q,defaultValue:"",render:({field:e})=>(0,s.jsxs)(_(),{fullWidth:!0,margin:"normal",error:!!D.format,children:[s.jsx(y(),{children:"Format"}),s.jsx(k(),{...e,label:"Format",children:["2D","3D"].map(e=>s.jsx(w(),{value:e,children:e},e))}),s.jsx(I(),{id:"component-error-text",children:getErrorMessage(D.format)})]})})})]}),s.jsx(f(),{sx:{flexGrow:1},container:!0,spacing:2,children:s.jsx(f(),{item:!0,xs:12,lg:12,children:(0,s.jsxs)(f(),{container:!0,justifyContent:"center",spacing:2,children:[s.jsx(f(),{item:!0,xs:12,md:12,lg:4,children:s.jsx(b(),{disabled:!P,InputProps:{inputProps:{min:5,max:25}},value:j,onChange:e=>S(parseInt(e.target.value)||0),type:"number",label:"Rows",error:!!D.rows,helperText:getErrorMessage(D.rows),fullWidth:!0})}),s.jsx(f(),{item:!0,xs:12,md:12,lg:4,children:s.jsx(b(),{disabled:!P,InputProps:{inputProps:{min:5,max:12}},value:v,onChange:e=>N(parseInt(e.target.value)||0),type:"number",label:"Columns",error:!!D.columns,helperText:getErrorMessage(D.columns),fullWidth:!0})})]})})}),s.jsx(f(),{sx:{flexGrow:1},container:!0,spacing:2,children:s.jsx(f(),{item:!0,xs:12,lg:12,children:s.jsx(f(),{container:!0,justifyContent:"center",spacing:2,children:P?(0,s.jsxs)(h.default,{gap:2,my:4,children:[s.jsx(F(),{variant:"contained",onClick:changeEditable,sx:{mr:2},children:"Show Preview"}),s.jsx(F(),{variant:"outlined",onClick:clearSelectedSeats,children:"Reset Layout"})]}):(0,s.jsxs)(h.default,{gap:2,my:4,children:[s.jsx(F(),{style:{marginRight:"5px"},variant:"outlined",onClick:changeEditable,children:"Edit Layout"}),s.jsx(F(),{variant:"contained",type:"submit",children:"Update"})]})})})})]}),s.jsx(s.Fragment,{children:(0,s.jsxs)("div",{className:M().seatsContainer,children:[(0,s.jsxs)("p",{className:M().header,children:["Select Seats to be ",s.jsx("b",{className:M().headerBlockedText,children:"Removed"})]}),c&&P&&s.jsx(()=>{let e=[];for(let t in c){let r=c[t].map((e,r)=>(0,s.jsxs)("span",{className:M().seatsHolder,children:[0===r&&s.jsx("span",{className:M().colName,children:t}),s.jsx("span",{className:getClassNameForSeats(e),onClick:()=>onSeatClick(e,r,t),children:r+1}),c&&r===c[t].length-1&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("br",{}),s.jsx("br",{})]})]},`${t}.${r}`));e.push(r)}return s.jsx("div",{className:M().seatsLeafContainer,children:e})},{}),c&&!P&&s.jsx(()=>{let e=[];for(let t in c){let r=0,a=c[t].map((e,a)=>(0,s.jsxs)("span",{className:M().seatsHolder,children:[0===a&&s.jsx("span",{className:M().colName,children:t}),3!==e?s.jsx("span",{className:getClassNameForSeats(e),children:r+=1}):s.jsx("span",{className:getClassNameForSeats(1),children:a+1}),c&&a===c[t].length-1&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("br",{}),s.jsx("br",{})]})]},`${t}.${a}`));e.push(a)}return s.jsx("div",{className:M().seatsLeafContainer,children:e})},{}),s.jsx("div",{className:M().cont_screen,children:s.jsx("div",{className:M().screen,children:s.jsx("span",{className:M().screen_text,children:"SCREEN"})})})]})})]})]})}},69108:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var s=r(95153);let a=(0,s.createProxy)(String.raw`/Users/saideekshithkatukojwala/Documents/Code/Projects/box-office/client/src/app/theater/[theaterId]/editScreen/page.tsx`),{__esModule:n,$$typeof:i}=a,l=a.default,o=l}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[2958,1323,9867,6933],()=>__webpack_exec__(68920));module.exports=r})();