exports.id=3508,exports.ids=[3508],exports.modules={77151:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,13724,23)),Promise.resolve().then(n.t.bind(n,35365,23)),Promise.resolve().then(n.t.bind(n,44900,23)),Promise.resolve().then(n.t.bind(n,44714,23)),Promise.resolve().then(n.t.bind(n,45392,23)),Promise.resolve().then(n.t.bind(n,8898,23))},19758:(e,t,n)=>{Promise.resolve().then(n.bind(n,13690))},82778:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Layout});var o=n(30784),i=n(9885),r=n(83476),s=n(20094),a=n.n(s),l=n(43872),d=n(79536),c=n.n(d),u=n(39966),h=n.n(u),p=n(33987),m=n.n(p),x=n(98331),g=n(56995),f=n.n(g);function Copyright(){return(0,o.jsxs)(m(),{variant:"body2",color:"text.secondary",align:"center",children:["Copyright \xa9 ",o.jsx(f(),{color:"inherit",href:"https://mui.com/",children:"Box Office"})," ",new Date().getFullYear(),"."]})}function Footer(){return(0,o.jsxs)(o.Fragment,{children:[o.jsx(x.Z,{}),o.jsx(l.default,{component:"footer",sx:{py:3,px:2,mt:"auto",backgroundColor:e=>"light"===e.palette.mode?e.palette.grey[200]:e.palette.grey[800]},children:o.jsx(h(),{maxWidth:"sm",children:o.jsx(Copyright,{})})})]})}var y=n(57114),b=n(74147),j=n.n(b),w=n(48060),v=n.n(w),C=n(71829),S=n.n(C),k=n(85055),M=n(95843),I=n.n(M),P=n(16614),L=n.n(P),A=n(11666),T=n.n(A),O=n(88707),_=n.n(O),D=n(21925),F=n(32122),E=n(58777),W=n(93832),R=n(3683),z=n.n(R),U=n(89440),B=n.n(U),Z=n(55981),N=n.n(Z),G=n(53602),q=n(6176),H=n.n(q),J=n(62133),$=n.n(J),K=n(43610),Q=n.n(K),V=n(93429),X=n.n(V),Y=n(80676),ee=n.n(Y),et=n(92870),en=n.n(et),eo=n(82173),ei=n(19659);function LocationSearchInput({sendLocation:e}){let[t,n]=(0,i.useState)(""),handleSelect=async t=>{let o=await (0,eo.NU)(t),i=o[0].address_components;n(t),e(i)};return o.jsx(eo.ZP,{value:t,onChange:n,onSelect:handleSelect,children:({getInputProps:e,suggestions:t,getSuggestionItemProps:n,loading:r})=>(0,o.jsxs)(ei.Box,{sx:{position:"absolute",top:"10%",width:"90%"},children:[o.jsx(en(),{...e({label:"Search Pincode..."}),variant:"outlined",fullWidth:!0}),r&&o.jsx("div",{children:"Loading..."}),o.jsx(H(),{sx:{position:"absolute",zIndex:1,width:"100%"},children:t.map(e=>(0,i.createElement)(Q(),{...n(e),sx:{backgroundColor:e.active?"#b9d2fa":"#ffffff",cursor:"pointer"},key:e.placeId},e.description))})]})})}var er=n(51949),es=n.n(er),ea=n(23458),el=n(21971),ed=n.n(el),ec=n(66558),eu=n(83894),eh=n(19098),ep=n(15050);let em=eh.Ry({tuesday:eh.Z_().min(0,{message:"Must be between 0 and 100"}).max(100,{message:"Must be between 0 and 100"}),night_time:eh.Z_().min(0,{message:"Must be between 0 and 100"}).max(100,{message:"Must be between 0 and 100"})});function Discount({submitSuccess:e}){let{control:t,handleSubmit:n,formState:{errors:r},setValue:s}=(0,ec.cI)({resolver:(0,eu.F)(em)});(0,i.useEffect)(()=>{(async function(){try{let e=await (0,ep.e)("","discount/all","GET");s("tuesday",e.data.tuesday.toString()),s("night_time",e.data.night_time.toString())}catch(e){console.error("Failed to fetch",e)}})()},[]);let getErrorMessage=e=>e&&"string"==typeof e.message?e.message:"",onSubmit=async t=>{await (0,ep.e)(t,"discount/add","POST"),e(!0)};return o.jsx("form",{onSubmit:n(onSubmit),children:(0,o.jsxs)(ed(),{container:!0,spacing:2,children:[o.jsx(ed(),{item:!0,xs:12,children:o.jsx(ec.Qr,{name:"tuesday",control:t,defaultValue:0,render:({field:e})=>o.jsx(en(),{...e,type:"number",label:"Tuesday Discounts (%)",error:!!r.tuesday,helperText:getErrorMessage(r.tuesday),InputProps:{inputProps:{min:0,max:100}},fullWidth:!0})})}),o.jsx(ed(),{item:!0,xs:12,children:o.jsx(ec.Qr,{name:"night_time",control:t,defaultValue:0,render:({field:e})=>o.jsx(en(),{...e,type:"number",label:"Daily Discounts (%)",error:!!r.night_time,helperText:getErrorMessage(r.night_time),InputProps:{inputProps:{min:0,max:100}},fullWidth:!0})})}),o.jsx(ed(),{item:!0,xs:12,children:o.jsx(L(),{type:"submit",variant:"contained",color:"primary",children:"Submit"})})]})})}let ex=(0,r.styled)("div")(({theme:e})=>({padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",marginTop:"10px",left:"-70px"})),eg=[{name:"Movies",route:"/movies/all",onlyAdmin:!1},{name:"Theaters",route:"/theater",onlyAdmin:!1},{name:"Arists",route:"/artist/all",onlyAdmin:!1},{name:"Analysis",route:"/analysis",onlyAdmin:!0},{name:"Manage Discounts",route:"openModal",onlyAdmin:!0}],ef=[{name:"Profile",route:"/personal_profile"},{name:"Purchases",route:"/purchases"},{name:"Rewards",route:"/rewards"},{name:"Manage Membership",route:"https://billing.stripe.com/p/login/test_cN23e27JRdQPeMEbII"},{name:"Logout",route:"/logout",icon:"LogoutIcon"}],ey=[{name:"Profile",route:"/personal_profile"},{name:"Logout",route:"/logout"}],eb={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},navigationBar=function(){let e=(0,y.useRouter)(),[t,n]=i.useState(""),s=(0,W.createFilterOptions)(),[d,u]=i.useState(""),[p,x]=i.useState({id:"",name:"",profile_url:""}),[g,f]=i.useState(!1),[b,w]=i.useState(null),[C,M]=i.useState(null),P=(0,ea.Z)(),[A,O]=(0,i.useState)([]),[R,U]=(0,i.useState)(!1),[Z,q]=(0,i.useState)([]),[J,K]=(0,i.useState)(!1);i.useEffect(()=>{fetchMovieData();let e=P.user;null!=e&&e.isAdmin?q(ey):q(ef),null!=e&&n(e.profile_url)},[]);let fetchMovieData=async()=>{try{let e=await (0,ep.e)("","movie/all","GET"),t=e.movies.map(e=>({id:e.id,name:e.title,profile_url:e.poster_url}));O(t)}catch(e){console.error("Failed to fetch movie data:",e)}},handleCloseNavMenu=()=>{w(null)},handleCloseUserMenu=()=>{M(null)},handleDrawerClose=()=>{f(!1)},handleCardClick=t=>{e.push(`/movie/${t}`)},V=(0,r.styled)("div")(({theme:e})=>({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:(0,r.alpha)(e.palette.common.white,.15),"&:hover":{backgroundColor:(0,r.alpha)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{marginLeft:e.spacing(3),width:"auto"}}));function redirectToPage(t){if("Logout"==t.name){P.setIsAdmin(!1),P.setLoggedOut(),e.push("/");return}if("openModal"==t.route){K(!0);return}e.push(t.route)}let handleClose=()=>{U(!1),K(!1)};return(0,o.jsxs)(l.default,{children:[(0,o.jsxs)(c(),{position:"static",children:[o.jsx(es(),{src:"https://maps.googleapis.com/maps/api/js?key=AIzaSyAH_4KikoUaqV41Fq09gBEsXzADYU1xM8w&libraries=places",strategy:"afterInteractive"}),o.jsx(h(),{maxWidth:"xl",children:(0,o.jsxs)(j(),{disableGutters:!0,children:[o.jsx(m(),{variant:"h6",noWrap:!0,component:"a",href:"/",sx:{mr:2,display:{xs:"none",md:"flex"},fontWeight:700,color:"inherit",textDecoration:"none"},children:"Box Office"}),(0,o.jsxs)(l.default,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[o.jsx(v(),{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{w(e.currentTarget)},color:"inherit",children:o.jsx(k.Z,{})}),o.jsx(S(),{id:"menu-appbar",anchorEl:b,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!b,onClose:handleCloseNavMenu,sx:{display:{xs:"block",md:"none"}},children:eg.map(e=>"openModal"!==e.route||"openModal"===e.route&&P.isAdmin?o.jsx(_(),{onClick:handleCloseNavMenu,children:(0,o.jsxs)(m(),{onClick:()=>{redirectToPage(e)},textAlign:"center",children:[" ",e.name]})},e.name):null)})]}),o.jsx(D.Z,{sx:{display:{xs:"flex",md:"none"},mr:1}}),o.jsx(m(),{variant:"h5",noWrap:!0,component:"a",href:"/",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontWeight:700,color:"inherit",textDecoration:"none"},children:"Box Office"}),o.jsx(l.default,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:eg.map(e=>!e.onlyAdmin||e.onlyAdmin&&P.isAdmin?o.jsx(L(),{onClick:()=>{redirectToPage(e)},sx:{my:2,color:"white",display:"block"},children:e.name},e.name):null)}),o.jsx(ee(),{value:p,onChange:(e,t)=>x(t),filterOptions:(e,t)=>{let n=s(e,t),{inputValue:o}=t,i=e.some(e=>o===e.name);return""===o||i||n.push({id:o.toLowerCase().replace(/\s/g,"-"),name:o,profile_url:""}),n},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"movie-search",options:A,getOptionLabel:e=>"string"==typeof e?e:e.name,renderOption:(e,t)=>(0,o.jsxs)(l.default,{component:"li",...e,onClick:()=>handleCardClick(t.id),style:{cursor:"pointer"},children:[o.jsx(I(),{src:t.profile_url,alt:t.name,sx:{width:30,height:30,marginRight:"10px"}}),t.name]}),sx:{position:"relative",borderRadius:4,backgroundColor:"transparent",width:300,marginLeft:0,padding:"8px 30px",color:"white",borderColor:"#FFFFFF","& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"},"& .MuiInputBase-input":{color:"white"},"& .MuiAutocomplete-clearIndicator":{color:"white"}}},freeSolo:!0,renderInput:e=>o.jsx(l.default,{children:o.jsx(en(),{...e,label:"Search movies",InputProps:{...e.InputProps,startAdornment:o.jsx(z(),{position:"start",children:o.jsx(F.Z,{sx:{color:"white"}})}),style:{color:"white"},sx:{backgroundColor:"transparent","&::placeholder":{color:"white"}}},InputLabelProps:{style:{color:"white"}},sx:{"& .MuiInputLabel-outlined":{color:"white"},"& .MuiInputLabel-outlined.Mui-focused":{color:"white"},"& .MuiInputBase-input":{color:"white"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"}}}})})}),(0,o.jsxs)(L(),{onClick:()=>{U(!0)},sx:{my:2,color:"white",display:"block"},children:[o.jsx(V,{children:o.jsx(ex,{children:o.jsx(E.Z,{})})}),""!=d?d:"Select Pincode"]},"location"),P.isLoggedIn?(0,o.jsxs)(l.default,{sx:{flexGrow:0},children:[o.jsx(T(),{title:"Open settings",children:o.jsx(v(),{onClick:()=>{f(!0)},sx:{p:0},children:o.jsx(I(),{alt:"Remy Sharp",src:t})})}),o.jsx(S(),{sx:{mt:"45px"},id:"menu-appbar",anchorEl:C,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!C,onClose:handleCloseUserMenu,children:Z.map(e=>o.jsx(_(),{onClick:handleCloseUserMenu,children:o.jsx(m(),{onClick:()=>{redirectToPage(e)},textAlign:"center",children:e.name})},e.name))})]}):(0,o.jsxs)(l.default,{children:[o.jsx(L(),{onClick:function(){e.push("/signup")},sx:{my:2,fontWeight:700,color:"inherit",textDecoration:"none"},children:"Sign Up"},"signup"),o.jsx(L(),{onClick:function(){e.push("/signin")},sx:{my:2,fontWeight:700,color:"inherit",textDecoration:"none"},children:"Sign In"},"signin")]})]})}),o.jsx(B(),{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:R,onClose:handleClose,closeAfterTransition:!0,slots:{backdrop:N()},slotProps:{backdrop:{timeout:500}},children:o.jsx(G.default,{in:R,children:o.jsx(l.default,{sx:{...eb,display:"flex",justifyContent:"center",alignItems:"center",width:"600px",maxWidth:"1000px",height:"400px"},children:o.jsx(LocationSearchInput,{sendLocation:function(t){let getAddressComponent=e=>t.find(t=>t.types.includes(e))?.long_name||"",n=getAddressComponent("locality"),o=getAddressComponent("administrative_area_level_2"),i=`${o}, ${n}`;U(!1),u(i),P.setPinCode(getAddressComponent("postal_code")),e.push("/")}})})})}),o.jsx(B(),{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:J,onClose:handleClose,closeAfterTransition:!0,slots:{backdrop:N()},slotProps:{backdrop:{timeout:500}},children:o.jsx(G.default,{in:J,children:o.jsx(l.default,{sx:{...eb,display:"flex",justifyContent:"center",alignItems:"center",width:"600px",maxWidth:"1000px",height:"400px"},children:o.jsx(Discount,{submitSuccess:function(){K(!1)}})})})})]}),o.jsx(a(),{anchor:"right",open:g,onClose:handleDrawerClose,children:o.jsx(l.default,{sx:{width:250},role:"presentation",onClick:handleDrawerClose,onKeyDown:handleDrawerClose,children:o.jsx(H(),{subheader:o.jsx($(),{component:"div",id:"nested-list-subheader",sx:{backgroundColor:e=>e.palette.primary.main,color:e=>e.palette.primary.contrastText,fontWeight:"bold",fontSize:"2rem",lineHeight:"normal",height:"70px",display:"flex",alignItems:"center"},children:"Hello"}),children:Z.map((e,t)=>o.jsx(Q(),{button:!0,onClick:()=>redirectToPage(e),children:o.jsx(X(),{primary:e.name})},e.name))})})})]})},page=()=>o.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"linear-gradient(to right, #f8f8f8, #e7e7e7)"},children:o.jsx("img",{src:"https://media.giphy.com/media/Ck8tWBj2lCTnUKdwxW/giphy.gif",alt:"Loading...",style:{width:"200px",height:"200px"}})});function Layout({children:e}){let[t,n]=i.useState(!1),[r,s]=i.useState(!1),[a,d]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{let e=setTimeout(()=>{d(!1)},500);return()=>clearTimeout(e)},[]),a)?o.jsx(page,{}):(0,o.jsxs)(l.default,{children:[o.jsx(navigationBar,{}),(0,o.jsxs)(l.default,{component:"main",sx:{backgroundColor:e=>"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900],display:"flex",flexDirection:"column",minHeight:"100vh"},children:[o.jsx(h(),{maxWidth:!1,component:"main",sx:{flex:1},children:e}),o.jsx(Footer,{})]})]})}(0,r.styled)(c(),{shouldForwardProp:e=>"open"!==e})(({theme:e,open:t})=>({zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),...t&&{marginLeft:240,width:"calc(100% - 240px)",transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}})),(0,r.styled)(a(),{shouldForwardProp:e=>"open"!==e})(({theme:e,open:t})=>({"& .MuiDrawer-paper":{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),boxSizing:"border-box",...!t&&{overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7),[e.breakpoints.up("sm")]:{width:e.spacing(9)}}}}))},13690:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>RootLayout});var o=n(30784),i=n(26044),r=n(99582);n(27369),n(73672),n(92301),n(54098);var s=n(82778),a=n(57114);function RootLayout({children:e}){let t=(0,a.usePathname)(),n=t.includes("/signup")||t.includes("/signin");return console.log(n),(0,o.jsxs)("html",{lang:"en",children:[(0,o.jsxs)("head",{children:[o.jsx("title",{children:"Box Office"}),o.jsx("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),o.jsx("link",{rel:"icon",href:"https://drive.google.com/uc?export=view&id=1gF49xuN0t0yjIv7WoybLhTScP6b15-fJ"})]}),o.jsx("body",{children:o.jsx(i.Z,{theme:r.Z,children:n?(0,o.jsxs)(o.Fragment,{children:[e," "]}):o.jsx(s.default,{children:e})})})]})}},99582:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(83476);let i=(0,o.createTheme)({palette:{primary:{main:"#009688",light:"#52c7b8",dark:"#00675b",contrastText:"#fff"},secondary:{main:"#ff9800",light:"#ffb74d",dark:"#f57c00",contrastText:"#000"},background:{default:"#f5f5f5",paper:"#fff"},text:{primary:"#212121",secondary:"#757575"}},typography:{fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif',fontSize:14,h1:{fontSize:"2.5rem",fontWeight:500}},components:{MuiDrawer:{styleOverrides:{paper:{backgroundColor:"#424242",color:"#fff"}}},MuiTooltip:{styleOverrides:{tooltip:{backgroundColor:"#333",color:"#fff",fontSize:"0.875em"}}},MuiAvatar:{styleOverrides:{root:{border:"2px solid #fff",boxShadow:"0 2px 10px rgba(0,0,0,0.2)"}}},MuiSnackbar:{styleOverrides:{root:{backgroundColor:"#009688"}}}}}),r=i},15050:(e,t,n)=>{"use strict";async function handleResponse(e){let t=e.headers.get("Content-Type")||"",n=t.includes("application/json"),o=n?await e.json():await e.text();if(!e.ok){if(n&&null!==o.errors)throw Error(JSON.stringify(o.errors));throw Error(o.message||e.statusText)}return o}async function getDataFromEndPoint(e,t,n){let o="http://ec2-3-101-12-15.us-west-1.compute.amazonaws.com/api/"+t,i=e instanceof FormData;if("GET"==n){let e=await fetch(o,{method:n,credentials:"include"});return handleResponse(e).then(e=>e)}let r={method:n,credentials:"include",body:e};i||(r.headers={"Content-Type":"application/json"},r.body=JSON.stringify(e));let s=await fetch(o,r);return handleResponse(s).then(e=>e)}n.d(t,{e:()=>getDataFromEndPoint})},23458:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(99715),i=n(48228);let r=(0,o.Ue)((0,i.tJ)(e=>({authUser:null,isLoggedIn:!1,requestLoading:!1,user:null,pincode:null,isAdmin:!1,setIsAdmin:t=>e(e=>({...e,isAdmin:t})),setUser:t=>e(e=>({...e,user:t})),setLoggedIn:()=>e(e=>({...e,isLoggedIn:!0})),setLoggedOut:()=>e(e=>({...e,isLoggedIn:!1})),setAuthUser:t=>e(e=>({...e,authUser:t})),setPinCode:t=>e(e=>({...e,pincode:t})),setRequestLoading:t=>e(e=>({...e,requestLoading:t})),reset:()=>e({authUser:null,requestLoading:!1})}),{name:"user-storage"})),s=r},79113:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$$typeof:()=>s,__esModule:()=>r,default:()=>l});var o=n(95153);let i=(0,o.createProxy)(String.raw`/Users/sravankumargorati/teamproject-infinite-loop/client/src/app/layout.tsx`),{__esModule:r,$$typeof:s}=i,a=i.default,l=a}};